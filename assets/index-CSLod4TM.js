import{r as a,j as e,H as g}from"./index-DeLNog96.js";import"./_commonjsHelpers-Cpj98o6Y.js";const ue="_addBuffBtn_185wl_1",je="_equationLine_185wl_5",xe="_stackedEquationsContainer_185wl_12",oe="_stackedEquations_185wl_12",ge="_leftBracket_185wl_23",fe="_rightBracket_185wl_24",v={addBuffBtn:ue,equationLine:je,stackedEquationsContainer:xe,stackedEquations:oe,leftBracket:ge,rightBracket:fe},X={物理:2,火:2,风:1.5,冰:1,雷:1,量子:.5,虚数:.5},me={角色:[["百分比生命","行迹",10],["百分比生命","光锥",18],["暴击伤害","天赋+四魂",68.4*5],["暴击伤害","行迹",37.3],["暴击伤害","一魂",36],["增伤","光锥",60],["减抗","六魂",30]],遗器:[["固定生命","头部",705],["固定攻击","手部",352],["百分比生命","衣服+12副词条",90.7],["暴击伤害","8副词条",46.3],["增伤","球",38.4],["增伤","学者套+行迹大招增伤",40]],辅助1:[["增伤","战技",72],["增伤","行迹",10],["增伤","日专",45],["暴击伤害","大招覆盖率1/3",18.4]],辅助2:[["易伤","大招",30],["减抗","战技",24],["真伤","一魂",24],["暴击伤害","缇专",48]],辅助3:[["固定生命","大招",600],["百分比生命","大招",30],["百分比生命","一魂",50],["易伤","光锥",18],["暴击伤害","女武神套",15]]},Y=["百分比攻击","百分比生命","百分比防御","固定攻击","固定生命","固定防御","增伤","暴击伤害","击破特攻","击破增伤","易伤","减防","减抗","真伤","独立乘区"],le={百分比攻击:4.32,百分比生命:4.32,百分比防御:5.4,固定攻击:21.169,固定生命:42.338,固定防御:21.169,增伤:3.84,暴击伤害:6.48,击破特攻:6.48,击破增伤:1,易伤:1,减防:1,减抗:1,真伤:1,独立乘区:1},d=r=>{const n=eval?.(r);if(typeof n!="number")throw new TypeError("Result must be number");return n};function re(r){const n=Object.fromEntries(Y.map(h=>[h,0]));for(const h of Object.values(r))for(const[y,,u]of h)n[y]+=u;return n}function $({children:r}){return e.jsxs("div",{className:v.stackedEquationsContainer,children:[e.jsx("div",{className:v.leftBracket}),e.jsx("div",{className:v.stackedEquations,children:r}),e.jsx("div",{className:v.rightBracket})]})}function s({stat:r,label:n,percentage:h}){return e.jsxs("ruby",{children:[Math.round(r*100)/100,e.jsx("rt",{children:n}),h?"%":null]})}function w({id:r,buffs:n,setBuffs:h}){const[y,u]=a.useState(!1),C=a.useRef(null),o=a.useRef(null),V=a.useRef(null);return e.jsxs("div",{children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"属性"}),e.jsx("th",{children:"来源"}),e.jsx("th",{children:"数值"})]})}),e.jsxs("tbody",{children:[n.map(([c,f,j],m)=>e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:`${r}${c}-${m}`,children:c})}),e.jsx("td",{children:f}),e.jsxs("td",{children:[e.jsx("input",{id:`${r}${c}-${m}`,defaultValue:j,onChange:x=>{try{const B=d(x.target.value),p=[...n];p[m][2]=B,h(p)}catch(B){x.target.setCustomValidity(B.message)}}}),c.startsWith("固定")?null:"%"]}),e.jsx("td",{children:e.jsx("button",{type:"button",onClick:()=>{const x=[...n];x.splice(m,1),h(x)},children:"×"})})]},`${r}-${c}-${f}`)),y&&e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("select",{ref:C,children:Y.map(c=>e.jsx("option",{value:c,children:c},c))})}),e.jsx("td",{children:e.jsx("input",{"aria-label":"Buff source",ref:o,defaultValue:""})}),e.jsx("td",{children:e.jsx("input",{"aria-label":"Buff value",ref:V,defaultValue:"0"})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",onClick:()=>{let c=0;try{c=d(V.current.value)}catch(j){V.current.setCustomValidity(j.message);return}if(n.some(j=>j[0]===C.current.value&&j[1]===o.current.value)){o.current.setCustomValidity("已经有相同属性和来源的增益");return}const f=[C.current.value,o.current.value,c];h([...n,f]),u(!1)},children:"√"}),e.jsx("button",{type:"button",onClick:()=>{u(!1)},children:"×"})]})]})]})]}),e.jsx("button",{type:"button",className:v.addBuffBtn,onClick:()=>u(!0),children:"+"})]})}function ae(r,{角色等级:n,属性击破倍率:h,基础攻击:y,基础生命:u,基础防御:C,攻击倍率:o,生命倍率:V,防御倍率:c,实际削韧值:f,超击破倍率:j,DOT倍率:m,敌人等级:x,敌人抗性:B,韧性上限:p,韧性状态:D}){const{百分比攻击:k,百分比生命:N,百分比防御:_,固定攻击:L,固定生命:F,固定防御:M,增伤:q,暴击伤害:A,击破特攻:E,击破增伤:H,易伤:O,减防:K,减抗:S,真伤:I,独立乘区:i}=re(r),b=y*(1+k/100)+L,R=u*(1+N/100)+F,W=C*(1+_/100)+M,T=((o/100*b+V/100*R+c/100*W)*(1+A/100)+m/100*b)*(1+q/100),z=D==="击破"?h/100*3767.55*(p/40+.5):0,G=D==="未击破"?0:j/100*3767.55*f/10,J=(z+G)*(1+E/100)*(1+H/100),P=(n+20)/(n+20+(x+20)*(1-Math.min(K/100,1))),Q=Math.max(-100,Math.min(B-S,90));return(T+J)*(1+O/100)*P*(1-Q/100)*(1+I/100)*(1+i/100)}function ve(){const[r,n]=a.useState(80),[h,y]=a.useState(X.冰),[u,C]=a.useState(1155),[o,V]=a.useState(2811),[c,f]=a.useState(882),[j,m]=a.useState(0),[x,B]=a.useState(245),[p,D]=a.useState(0),[k,N]=a.useState(0),[_,L]=a.useState(0),[F,M]=a.useState(0),[q,A]=a.useState(95),[E,H]=a.useState(0),[O,K]=a.useState(0),[S,I]=a.useState("未击破"),[i,b]=a.useState(me),{百分比攻击:R,百分比生命:W,百分比防御:Z,固定攻击:T,固定生命:z,固定防御:G,增伤:J,暴击伤害:P,击破特攻:Q,击破增伤:ee,易伤:ne,减防:ce,减抗:ie,真伤:de,独立乘区:he}=re(i),te={角色等级:r,属性击破倍率:h,基础攻击:u,基础生命:o,基础防御:c,攻击倍率:j,生命倍率:x,防御倍率:p,实际削韧值:k,超击破倍率:_,DOT倍率:F,敌人等级:q,敌人抗性:E,韧性上限:O,韧性状态:S},U=ae(i,te);return e.jsxs("div",{children:[e.jsx("h1",{children:"星铁伤害计算器"}),e.jsx("p",{children:"一些参考："}),e.jsxs("ul",{children:[e.jsx("li",{children:"主词条：43.2%生命/43.2%攻击/54.0%防御/38.4%增伤/64.8%暴伤/64.8%击破特攻"}),e.jsxs("li",{children:["角色基础面板/技能组：",e.jsx("a",{href:"https://homdgcat.wiki/sr/char",rel:"noopener noreferrer",target:"_blank",children:"玉衡杯"})]}),e.jsx("li",{children:"敌人抗性有弱点为 0，无弱点默认 20%，额外抗性另标"})]}),e.jsx("p",{children:e.jsx("strong",{children:"注："})}),e.jsxs("ul",{children:[e.jsx("li",{children:"假设满暴击率。如果未满暴，可以按照 (暴击率×暴击伤害) 计算期望"}),e.jsx("li",{children:"目前考虑不了角色打多种属性伤害，比如停云赐福雷属性附加伤害、海瑟音多颜色DOT等，这些会影响倍率区、增伤区、抗性区的计算"}),e.jsx("li",{children:"目前考虑不了特定伤害类型乘区，比如系囚套DOT减防、繁星套战技增伤等"}),e.jsx("li",{children:"基于以上两点，建议一次算一种属性一种伤害类型，然后再把多个伤害来源相加"}),e.jsx("li",{children:"光锥、星魂因为涉及机制和基础面板，不属于可调整的配置，如需调整需要手动计算。光锥和星魂效果属于自拐"}),e.jsx("li",{children:"非完全覆盖的buff（如大公套、辅助buff、需要叠层的自拐等）请自行评估覆盖率"}),e.jsx("li",{children:"倍率拐（如同谐主）和附伤（如缇宝）无法统计，倍率请填在角色基础倍率中，附伤请单独计算"}),e.jsxs("li",{children:["下面的输入框支持基本数学表达式，如",e.jsx("code",{children:"44*5"})]})]}),e.jsx(g,{level:2,children:"敌人基础数值"}),e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"敌人等级",children:"等级"})}),e.jsx("td",{children:e.jsx("input",{id:"敌人等级",defaultValue:q,onChange:t=>{try{A(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"敌人抗性",children:"抗性"})}),e.jsxs("td",{children:[e.jsx("input",{id:"敌人抗性",defaultValue:E,onChange:t=>{try{H(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}}),"%"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"韧性上限",children:"韧性上限"})}),e.jsx("td",{children:e.jsx("input",{id:"韧性上限",defaultValue:O,onChange:t=>{try{K(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"韧性状态",children:"韧性状态"})}),e.jsx("td",{children:e.jsxs("select",{id:"韧性状态",defaultValue:S,onChange:t=>{I(t.target.selectedOptions[0].value)},children:[e.jsx("option",{children:"未击破"}),e.jsx("option",{children:"击破"}),e.jsx("option",{children:"已击破"})]})})]})]}),e.jsx(g,{level:2,children:"角色基础数值"}),e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"等级",children:"等级"})}),e.jsx("td",{children:e.jsx("input",{id:"等级",defaultValue:r,onChange:t=>{try{n(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"属性",children:"属性"})}),e.jsx("td",{children:e.jsx("select",{id:"属性",defaultValue:"冰",onChange:t=>{y(X[t.target.selectedOptions[0].value])},children:Object.keys(X).map(t=>e.jsx("option",{value:t,children:t},t))})})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"基础攻击",children:"基础攻击"})}),e.jsx("td",{children:e.jsx("input",{id:"基础攻击",defaultValue:u,onChange:t=>{try{C(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"直伤攻击倍率",children:"直伤攻击倍率"})}),e.jsxs("td",{children:[e.jsx("input",{id:"直伤攻击倍率",defaultValue:j,onChange:t=>{try{m(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}}),"%"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"基础生命",children:"基础生命"})}),e.jsx("td",{children:e.jsx("input",{id:"基础生命",defaultValue:o,onChange:t=>{try{V(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"直伤生命倍率",children:"直伤生命倍率"})}),e.jsxs("td",{children:[e.jsx("input",{id:"直伤生命倍率",defaultValue:x,onChange:t=>{try{B(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}}),"%"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"基础防御",children:"基础防御"})}),e.jsx("td",{children:e.jsx("input",{id:"基础防御",defaultValue:c,onChange:t=>{try{f(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"直伤防御倍率",children:"直伤防御倍率"})}),e.jsxs("td",{children:[e.jsx("input",{id:"直伤防御倍率",defaultValue:p,onChange:t=>{try{D(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}}),"%"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"实际削韧值",children:"实际削韧值"})}),e.jsx("td",{children:e.jsx("input",{id:"实际削韧值",defaultValue:k,onChange:t=>{try{N(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})}),e.jsx("th",{children:e.jsx("label",{htmlFor:"超击破倍率",children:"超击破倍率"})}),e.jsxs("td",{children:[e.jsx("input",{id:"超击破倍率",defaultValue:_,onChange:t=>{try{L(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}}),"%"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{htmlFor:"DOT倍率",children:"DOT倍率"})}),e.jsx("td",{children:e.jsx("input",{id:"DOT倍率",defaultValue:F,onChange:t=>{try{M(d(t.target.value))}catch(l){t.target.setCustomValidity(l.message)}}})})]})]}),e.jsx(g,{level:2,children:"角色自拐"}),e.jsx(w,{id:"角色",buffs:i.角色,setBuffs:t=>b({...i,角色:t})}),e.jsx(g,{level:2,children:"角色遗器方案"}),e.jsx(w,{id:"遗器",buffs:i.遗器,setBuffs:t=>b({...i,遗器:t})}),e.jsx(g,{level:2,children:"辅助1"}),e.jsx(w,{id:"辅助1",buffs:i.辅助1,setBuffs:t=>b({...i,辅助1:t})}),e.jsx(g,{level:2,children:"辅助2"}),e.jsx(w,{id:"辅助2",buffs:i.辅助2,setBuffs:t=>b({...i,辅助2:t})}),e.jsx(g,{level:2,children:"辅助3"}),e.jsx(w,{id:"辅助3",buffs:i.辅助3,setBuffs:t=>b({...i,辅助3:t})}),e.jsx(g,{level:2,children:"最终伤害"}),e.jsxs("div",{children:[e.jsxs($,{children:[e.jsxs("div",{className:v.equationLine,children:[e.jsxs($,{children:[e.jsxs("div",{className:v.equationLine,children:[e.jsxs($,{children:[e.jsxs("p",{children:[e.jsx(s,{stat:j,label:"攻击倍率",percentage:!0})," × (",e.jsx(s,{stat:u,label:"基础攻击"})," × (1 + ",e.jsx(s,{stat:R,label:"百分比攻击",percentage:!0}),") + ",e.jsx(s,{stat:T,label:"固定攻击"}),")"]}),e.jsxs("p",{children:[e.jsx(s,{stat:x,label:"生命倍率",percentage:!0})," × (",e.jsx(s,{stat:o,label:"基础生命"})," × (1 + ",e.jsx(s,{stat:W,label:"百分比生命",percentage:!0}),") + ",e.jsx(s,{stat:z,label:"固定生命"}),")"]}),e.jsxs("p",{children:[e.jsx(s,{stat:p,label:"防御倍率",percentage:!0})," × (",e.jsx(s,{stat:c,label:"基础防御"})," × (1 + ",e.jsx(s,{stat:Z,label:"百分比防御",percentage:!0}),") + ",e.jsx(s,{stat:G,label:"固定防御"}),")"]})]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:P,label:"暴击伤害",percentage:!0}),")"]})]}),e.jsxs("p",{children:[e.jsx(s,{stat:F,label:"DOT倍率",percentage:!0})," × (",e.jsx(s,{stat:u,label:"基础攻击"})," × (1 + ",e.jsx(s,{stat:R,label:"百分比攻击",percentage:!0}),") + ",e.jsx(s,{stat:T,label:"固定攻击"}),")"]})]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:J,label:"增伤",percentage:!0}),")"]})]}),S!=="未击破"&&e.jsxs("div",{className:v.equationLine,children:[e.jsxs($,{children:[S==="击破"&&e.jsxs("p",{children:[e.jsx(s,{stat:h,label:"属性击破倍率",percentage:!0})," ","× 3767.55 × (",e.jsx(s,{stat:O,label:"韧性上限"})," / 40 + 0.5)"]}),e.jsxs("p",{children:[e.jsx(s,{stat:_,label:"超击破倍率",percentage:!0})," × 3767.55 × ",e.jsx(s,{stat:k,label:"实际削韧值"})," / 10"]})]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:Q,label:"击破特攻",percentage:!0}),") × (1 + ",e.jsx(s,{stat:ee,label:"击破增伤",percentage:!0}),")"]})]})]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:ne,label:"易伤",percentage:!0}),")"]}),e.jsxs("p",{children:["× (",e.jsx(s,{stat:r,label:"角色等级"})," + 20) / (",e.jsx(s,{stat:r,label:"角色等级"})," + 20 + (",e.jsx(s,{stat:q,label:"敌人等级"})," + 20) × (1 － min(",e.jsx(s,{stat:ce,label:"减防",percentage:!0}),", 100%)))"]}),e.jsxs("p",{children:["× (1 － clamp(－100%, ",e.jsx(s,{stat:E,label:"敌人抗性",percentage:!0})," － ",e.jsx(s,{stat:ie,label:"减抗",percentage:!0}),", 90%))"]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:de,label:" 真伤",percentage:!0}),")"]}),e.jsxs("p",{children:["× (1 + ",e.jsx(s,{stat:he,label:"独立乘区",percentage:!0}),")"]})]}),e.jsxs("output",{children:["= ",e.jsx("strong",{children:Math.round(U)})]}),e.jsx(g,{level:2,children:"词条收益"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"属性"}),e.jsx("th",{children:"单词条数值"}),e.jsx("th",{children:"伤害提升"})]})}),e.jsx("tbody",{children:Y.map(t=>{const l={...i};l.测试=[[t,"测试",le[t]]];const se=(ae(l,te)-U)/U*100;return[se,e.jsxs("tr",{children:[e.jsx("th",{children:t}),e.jsx("td",{children:le[t]}),e.jsxs("td",{children:[se.toFixed(2),"%"]})]},t)]}).filter(t=>t[0]>0).sort((t,l)=>l[0]-t[0]).map(t=>t[1])})]})]})}const ye={title:"Star Rail damage calculator",description:"Estimate the damage with any given team & buffs in Honkai: Star Rail"};export{ve as default,ye as meta};
