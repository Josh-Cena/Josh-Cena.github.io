import{_ as V,q as Oe,t as Ie,s as qe,g as ze,b as De,a as Be,c as _e,A as Ve,d as Fn,ad as Ye,z as Fe,k as Xe}from"./index-BrPPl3CT.js";import{o as We}from"./ordinal-Cboi1Yqb.js";import"./index-viUjO3pU.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./init-Gi6I4Gst.js";function Ue(X){for(var Q=X.length/6|0,c=new Array(Q),O=0;O<Q;)c[O]="#"+X.slice(O*6,++O*6);return c}const He=Ue("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var Mn={exports:{}},An={exports:{}},Ge=An.exports,ve;function Qe(){return ve||(ve=1,(function(X,Q){(function(c,O){O(Q)})(Ge,(function(c){function O(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function I(e){let i=e,s=e;e.length===1&&(i=(g,w)=>e(g)-w,s=ut(e));function a(g,w,q,J){for(q==null&&(q=0),J==null&&(J=g.length);q<J;){const K=q+J>>>1;s(g[K],w)<0?q=K+1:J=K}return q}function o(g,w,q,J){for(q==null&&(q=0),J==null&&(J=g.length);q<J;){const K=q+J>>>1;s(g[K],w)>0?J=K:q=K+1}return q}function l(g,w,q,J){q==null&&(q=0),J==null&&(J=g.length);const K=a(g,w,q,J-1);return K>q&&i(g[K-1],w)>-i(g[K],w)?K-1:K}return{left:a,center:l,right:o}}function ut(e){return(i,s)=>O(e(i),s)}function H(e){return e===null?NaN:+e}function*ot(e,i){if(i===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(yield s);else{let s=-1;for(let a of e)(a=i(a,++s,e))!=null&&(a=+a)>=a&&(yield a)}}const S=I(O),v=S.right,m=S.left,A=I(H).center;function M(e,i){let s=0;if(i===void 0)for(let a of e)a!=null&&(a=+a)>=a&&++s;else{let a=-1;for(let o of e)(o=i(o,++a,e))!=null&&(o=+o)>=o&&++s}return s}function T(e){return e.length|0}function rt(e){return!(e>0)}function nt(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function ht(e){return i=>e(...i)}function at(...e){const i=typeof e[e.length-1]=="function"&&ht(e.pop());e=e.map(nt);const s=e.map(T),a=e.length-1,o=new Array(a+1).fill(0),l=[];if(a<0||s.some(rt))return l;for(;;){l.push(o.map((w,q)=>e[q][w]));let g=a;for(;++o[g]===s[g];){if(g===0)return i?l.map(i):l;o[g--]=0}}}function ct(e,i){var s=0,a=0;return Float64Array.from(e,i===void 0?o=>s+=+o||0:o=>s+=+i(o,a++,e)||0)}function pt(e,i){return i<e?-1:i>e?1:i>=e?0:NaN}function gt(e,i){let s=0,a,o=0,l=0;if(i===void 0)for(let g of e)g!=null&&(g=+g)>=g&&(a=g-o,o+=a/++s,l+=a*(g-o));else{let g=-1;for(let w of e)(w=i(w,++g,e))!=null&&(w=+w)>=w&&(a=w-o,o+=a/++s,l+=a*(w-o))}if(s>1)return l/(s-1)}function j(e,i){const s=gt(e,i);return s&&Math.sqrt(s)}function ft(e,i){let s,a;if(i===void 0)for(const o of e)o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)));else{let o=-1;for(let l of e)(l=i(l,++o,e))!=null&&(s===void 0?l>=l&&(s=a=l):(s>l&&(s=l),a<l&&(a=l)))}return[s,a]}class St{constructor(){this._partials=new Float64Array(32),this._n=0}add(i){const s=this._partials;let a=0;for(let o=0;o<this._n&&o<32;o++){const l=s[o],g=i+l,w=Math.abs(i)<Math.abs(l)?i-(g-l):l-(g-i);w&&(s[a++]=w),i=g}return s[a]=i,this._n=a+1,this}valueOf(){const i=this._partials;let s=this._n,a,o,l,g=0;if(s>0){for(g=i[--s];s>0&&(a=g,o=i[--s],g=a+o,l=o-(g-a),!l););s>0&&(l<0&&i[s-1]<0||l>0&&i[s-1]>0)&&(o=l*2,a=g+o,o==a-g&&(g=a))}return g}}function E(e,i){const s=new St;if(i===void 0)for(let a of e)(a=+a)&&s.add(a);else{let a=-1;for(let o of e)(o=+i(o,++a,e))&&s.add(o)}return+s}function Y(e,i){const s=new St;let a=-1;return Float64Array.from(e,i===void 0?o=>s.add(+o||0):o=>s.add(+i(o,++a,e)||0))}class N extends Map{constructor(i,s=Ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),i!=null)for(const[a,o]of i)this.set(a,o)}get(i){return super.get(W(this,i))}has(i){return super.has(W(this,i))}set(i,s){return super.set(dt(this,i),s)}delete(i){return super.delete(Z(this,i))}}class G extends Set{constructor(i,s=Ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),i!=null)for(const a of i)this.add(a)}has(i){return super.has(W(this,i))}add(i){return super.add(dt(this,i))}delete(i){return super.delete(Z(this,i))}}function W({_intern:e,_key:i},s){const a=i(s);return e.has(a)?e.get(a):s}function dt({_intern:e,_key:i},s){const a=i(s);return e.has(a)?e.get(a):(e.set(a,s),s)}function Z({_intern:e,_key:i},s){const a=i(s);return e.has(a)&&(s=e.get(s),e.delete(a)),s}function Ct(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xt(e){return e}function Mt(e,...i){return zt(e,xt,xt,i)}function yt(e,...i){return zt(e,Array.from,xt,i)}function Ot(e,i,...s){return zt(e,xt,i,s)}function Pt(e,i,...s){return zt(e,Array.from,i,s)}function At(e,...i){return zt(e,xt,tn,i)}function D(e,...i){return zt(e,Array.from,tn,i)}function tn(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function zt(e,i,s,a){return(function o(l,g){if(g>=a.length)return s(l);const w=new N,q=a[g++];let J=-1;for(const K of l){const st=q(K,++J,l),_t=w.get(st);_t?_t.push(K):w.set(st,[K])}for(const[K,st]of w)w.set(K,o(st,g));return i(w)})(e,0)}function Ft(e,i){return Array.from(i,s=>e[s])}function Ht(e,...i){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[s=O]=i;if(s.length===1||i.length>1){const a=Uint32Array.from(e,(o,l)=>l);return i.length>1?(i=i.map(o=>e.map(o)),a.sort((o,l)=>{for(const g of i){const w=O(g[o],g[l]);if(w)return w}})):(s=e.map(s),a.sort((o,l)=>O(s[o],s[l]))),Ft(e,a)}return e.sort(s)}function gn(e,i,s){return(i.length===1?Ht(Ot(e,i,s),(([a,o],[l,g])=>O(o,g)||O(a,l))):Ht(Mt(e,s),(([a,o],[l,g])=>i(o,g)||O(a,l)))).map(([a])=>a)}var mn=Array.prototype,nn=mn.slice;function jt(e){return function(){return e}}var en=Math.sqrt(50),Jt=Math.sqrt(10),Kt=Math.sqrt(2);function rn(e,i,s){var a,o=-1,l,g,w;if(i=+i,e=+e,s=+s,e===i&&s>0)return[e];if((a=i<e)&&(l=e,e=i,i=l),(w=Gt(e,i,s))===0||!isFinite(w))return[];if(w>0){let q=Math.round(e/w),J=Math.round(i/w);for(q*w<e&&++q,J*w>i&&--J,g=new Array(l=J-q+1);++o<l;)g[o]=(q+o)*w}else{w=-w;let q=Math.round(e*w),J=Math.round(i*w);for(q/w<e&&++q,J/w>i&&--J,g=new Array(l=J-q+1);++o<l;)g[o]=(q+o)/w}return a&&g.reverse(),g}function Gt(e,i,s){var a=(i-e)/Math.max(0,s),o=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,o);return o>=0?(l>=en?10:l>=Jt?5:l>=Kt?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(l>=en?10:l>=Jt?5:l>=Kt?2:1)}function sn(e,i,s){var a=Math.abs(i-e)/Math.max(0,s),o=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),l=a/o;return l>=en?o*=10:l>=Jt?o*=5:l>=Kt&&(o*=2),i<e?-o:o}function on(e,i,s){let a;for(;;){const o=Gt(e,i,s);if(o===a||o===0||!isFinite(o))return[e,i];o>0?(e=Math.floor(e/o)*o,i=Math.ceil(i/o)*o):o<0&&(e=Math.ceil(e*o)/o,i=Math.floor(i*o)/o),a=o}}function an(e){return Math.ceil(Math.log(M(e))/Math.LN2)+1}function p(){var e=xt,i=ft,s=an;function a(o){Array.isArray(o)||(o=Array.from(o));var l,g=o.length,w,q=new Array(g);for(l=0;l<g;++l)q[l]=e(o[l],l,o);var J=i(q),K=J[0],st=J[1],_t=s(q,K,st);if(!Array.isArray(_t)){const re=st,Ut=+_t;if(i===ft&&([K,st]=on(K,st,Ut)),_t=rn(K,st,Ut),_t[_t.length-1]>=st)if(re>=st&&i===ft){const Nt=Gt(K,st,Ut);isFinite(Nt)&&(Nt>0?st=(Math.floor(st/Nt)+1)*Nt:Nt<0&&(st=(Math.ceil(st*-Nt)+1)/-Nt))}else _t.pop()}for(var Et=_t.length;_t[0]<=K;)_t.shift(),--Et;for(;_t[Et-1]>st;)_t.pop(),--Et;var ln=new Array(Et+1),Sn;for(l=0;l<=Et;++l)Sn=ln[l]=[],Sn.x0=l>0?_t[l-1]:K,Sn.x1=l<Et?_t[l]:st;for(l=0;l<g;++l)w=q[l],K<=w&&w<=st&&ln[v(_t,w,0,Et)].push(o[l]);return ln}return a.value=function(o){return arguments.length?(e=typeof o=="function"?o:jt(o),a):e},a.domain=function(o){return arguments.length?(i=typeof o=="function"?o:jt([o[0],o[1]]),a):i},a.thresholds=function(o){return arguments.length?(s=typeof o=="function"?o:Array.isArray(o)?jt(nn.call(o)):jt(o),a):s},a}function R(e,i){let s;if(i===void 0)for(const a of e)a!=null&&(s<a||s===void 0&&a>=a)&&(s=a);else{let a=-1;for(let o of e)(o=i(o,++a,e))!=null&&(s<o||s===void 0&&o>=o)&&(s=o)}return s}function L(e,i){let s;if(i===void 0)for(const a of e)a!=null&&(s>a||s===void 0&&a>=a)&&(s=a);else{let a=-1;for(let o of e)(o=i(o,++a,e))!=null&&(s>o||s===void 0&&o>=o)&&(s=o)}return s}function C(e,i,s=0,a=e.length-1,o=O){for(;a>s;){if(a-s>600){const q=a-s+1,J=i-s+1,K=Math.log(q),st=.5*Math.exp(2*K/3),_t=.5*Math.sqrt(K*st*(q-st)/q)*(J-q/2<0?-1:1),Et=Math.max(s,Math.floor(i-J*st/q+_t)),ln=Math.min(a,Math.floor(i+(q-J)*st/q+_t));C(e,i,Et,ln,o)}const l=e[i];let g=s,w=a;for(x(e,s,i),o(e[a],l)>0&&x(e,s,a);g<w;){for(x(e,g,w),++g,--w;o(e[g],l)<0;)++g;for(;o(e[w],l)>0;)--w}o(e[s],l)===0?x(e,s,w):(++w,x(e,w,a)),w<=i&&(s=w+1),i<=w&&(a=w-1)}return e}function x(e,i,s){const a=e[i];e[i]=e[s],e[s]=a}function B(e,i,s){if(e=Float64Array.from(ot(e,s)),!!(a=e.length)){if((i=+i)<=0||a<2)return L(e);if(i>=1)return R(e);var a,o=(a-1)*i,l=Math.floor(o),g=R(C(e,l).subarray(0,l+1)),w=L(e.subarray(l+1));return g+(w-g)*(o-l)}}function et(e,i,s=H){if(a=e.length){if((i=+i)<=0||a<2)return+s(e[0],0,e);if(i>=1)return+s(e[a-1],a-1,e);var a,o=(a-1)*i,l=Math.floor(o),g=+s(e[l],l,e),w=+s(e[l+1],l+1,e);return g+(w-g)*(o-l)}}function Xt(e,i,s){return Math.ceil((s-i)/(2*(B(e,.75)-B(e,.25))*Math.pow(M(e),-1/3)))}function Rt(e,i,s){return Math.ceil((s-i)/(3.5*j(e)*Math.pow(M(e),-1/3)))}function Dt(e,i){let s,a=-1,o=-1;if(i===void 0)for(const l of e)++o,l!=null&&(s<l||s===void 0&&l>=l)&&(s=l,a=o);else for(let l of e)(l=i(l,++o,e))!=null&&(s<l||s===void 0&&l>=l)&&(s=l,a=o);return a}function mt(e,i){let s=0,a=0;if(i===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++s,a+=o);else{let o=-1;for(let l of e)(l=i(l,++o,e))!=null&&(l=+l)>=l&&(++s,a+=l)}if(s)return a/s}function bt(e,i){return B(e,.5,i)}function*Bt(e){for(const i of e)yield*i}function Gn(e){return Array.from(Bt(e))}function vn(e,i){let s,a=-1,o=-1;if(i===void 0)for(const l of e)++o,l!=null&&(s>l||s===void 0&&l>=l)&&(s=l,a=o);else for(let l of e)(l=i(l,++o,e))!=null&&(s>l||s===void 0&&l>=l)&&(s=l,a=o);return a}function Qn(e,i=jn){const s=[];let a,o=!1;for(const l of e)o&&s.push(i(a,l)),a=l,o=!0;return s}function jn(e,i){return[e,i]}function Wt(e,i,s){e=+e,i=+i,s=(o=arguments.length)<2?(i=e,e=0,1):o<3?1:+s;for(var a=-1,o=Math.max(0,Math.ceil((i-e)/s))|0,l=new Array(o);++a<o;)l[a]=e+a*s;return l}function fn(e,i=O){let s,a=!1;if(i.length===1){let o;for(const l of e){const g=i(l);(a?O(g,o)<0:O(g,g)===0)&&(s=l,o=g,a=!0)}}else for(const o of e)(a?i(o,s)<0:i(o,o)===0)&&(s=o,a=!0);return s}function un(e,i=O){if(i.length===1)return vn(e,i);let s,a=-1,o=-1;for(const l of e)++o,(a<0?i(l,l)===0:i(l,s)<0)&&(s=l,a=o);return a}function Jn(e,i=O){let s,a=!1;if(i.length===1){let o;for(const l of e){const g=i(l);(a?O(g,o)>0:O(g,g)===0)&&(s=l,o=g,a=!0)}}else for(const o of e)(a?i(o,s)>0:i(o,o)===0)&&(s=o,a=!0);return s}function Ln(e,i=O){if(i.length===1)return Dt(e,i);let s,a=-1,o=-1;for(const l of e)++o,(a<0?i(l,l)===0:i(l,s)>0)&&(s=l,a=o);return a}function Kn(e,i){const s=un(e,i);return s<0?void 0:s}var Cn=Pn(Math.random);function Pn(e){return function(s,a=0,o=s.length){let l=o-(a=+a);for(;l;){const g=e()*l--|0,w=s[l+a];s[l+a]=s[g+a],s[g+a]=w}return s}}function Rn(e,i){let s=0;if(i===void 0)for(let a of e)(a=+a)&&(s+=a);else{let a=-1;for(let o of e)(o=+i(o,++a,e))&&(s+=o)}return s}function On(e){if(!(l=e.length))return[];for(var i=-1,s=L(e,_n),a=new Array(s);++i<s;)for(var o=-1,l,g=a[i]=new Array(l);++o<l;)g[o]=e[o][i];return a}function _n(e){return e.length}function xn(){return On(arguments)}function Zn(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let s=-1;for(const a of e)if(!i(a,++s,e))return!1;return!0}function kn(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let s=-1;for(const a of e)if(i(a,++s,e))return!0;return!1}function $n(e,i){if(typeof i!="function")throw new TypeError("test is not a function");const s=[];let a=-1;for(const o of e)i(o,++a,e)&&s.push(o);return s}function bn(e,i){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof i!="function")throw new TypeError("mapper is not a function");return Array.from(e,(s,a)=>i(s,a,e))}function te(e,i,s){if(typeof i!="function")throw new TypeError("reducer is not a function");const a=e[Symbol.iterator]();let o,l,g=-1;if(arguments.length<3){if({done:o,value:s}=a.next(),o)return;++g}for(;{done:o,value:l}=a.next(),!o;)s=i(s,l,++g,e);return s}function wn(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function In(e,...i){e=new Set(e);for(const s of i)for(const a of s)e.delete(a);return e}function ne(e,i){const s=i[Symbol.iterator](),a=new Set;for(const o of e){if(a.has(o))return!1;let l,g;for(;({value:l,done:g}=s.next())&&!g;){if(Object.is(o,l))return!1;a.add(l)}}return!0}function qn(e){return e instanceof Set?e:new Set(e)}function ee(e,...i){e=new Set(e),i=i.map(qn);t:for(const s of e)for(const a of i)if(!a.has(s)){e.delete(s);continue t}return e}function Tn(e,i){const s=e[Symbol.iterator](),a=new Set;for(const o of i){if(a.has(o))continue;let l,g;for(;{value:l,done:g}=s.next();){if(g)return!1;if(a.add(l),Object.is(o,l))break}}return!0}function ie(e,i){return Tn(i,e)}function zn(...e){const i=new Set;for(const s of e)for(const a of s)i.add(a);return i}c.Adder=St,c.InternMap=N,c.InternSet=G,c.ascending=O,c.bin=p,c.bisect=v,c.bisectCenter=A,c.bisectLeft=m,c.bisectRight=v,c.bisector=I,c.count=M,c.cross=at,c.cumsum=ct,c.descending=pt,c.deviation=j,c.difference=In,c.disjoint=ne,c.every=Zn,c.extent=ft,c.fcumsum=Y,c.filter=$n,c.fsum=E,c.greatest=Jn,c.greatestIndex=Ln,c.group=Mt,c.groupSort=gn,c.groups=yt,c.histogram=p,c.index=At,c.indexes=D,c.intersection=ee,c.least=fn,c.leastIndex=un,c.map=bn,c.max=R,c.maxIndex=Dt,c.mean=mt,c.median=bt,c.merge=Gn,c.min=L,c.minIndex=vn,c.nice=on,c.pairs=Qn,c.permute=Ft,c.quantile=B,c.quantileSorted=et,c.quickselect=C,c.range=Wt,c.reduce=te,c.reverse=wn,c.rollup=Ot,c.rollups=Pt,c.scan=Kn,c.shuffle=Cn,c.shuffler=Pn,c.some=kn,c.sort=Ht,c.subset=ie,c.sum=Rn,c.superset=Tn,c.thresholdFreedmanDiaconis=Xt,c.thresholdScott=Rt,c.thresholdSturges=an,c.tickIncrement=Gt,c.tickStep=sn,c.ticks=rn,c.transpose=On,c.union=zn,c.variance=gt,c.zip=xn,Object.defineProperty(c,"__esModule",{value:!0})}))})(An,An.exports)),An.exports}var En={exports:{}},Nn={exports:{}},je=Nn.exports,xe;function Je(){return xe||(xe=1,(function(X,Q){(function(c,O){O(Q)})(je,function(c){var O=Math.PI,I=2*O,ut=1e-6,H=I-ut;function ot(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function S(){return new ot}ot.prototype=S.prototype={constructor:ot,moveTo:function(v,m){this._+="M"+(this._x0=this._x1=+v)+","+(this._y0=this._y1=+m)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(v,m){this._+="L"+(this._x1=+v)+","+(this._y1=+m)},quadraticCurveTo:function(v,m,A,M){this._+="Q"+ +v+","+ +m+","+(this._x1=+A)+","+(this._y1=+M)},bezierCurveTo:function(v,m,A,M,T,rt){this._+="C"+ +v+","+ +m+","+ +A+","+ +M+","+(this._x1=+T)+","+(this._y1=+rt)},arcTo:function(v,m,A,M,T){v=+v,m=+m,A=+A,M=+M,T=+T;var rt=this._x1,nt=this._y1,ht=A-v,at=M-m,ct=rt-v,pt=nt-m,gt=ct*ct+pt*pt;if(T<0)throw new Error("negative radius: "+T);if(this._x1===null)this._+="M"+(this._x1=v)+","+(this._y1=m);else if(gt>ut)if(!(Math.abs(pt*ht-at*ct)>ut)||!T)this._+="L"+(this._x1=v)+","+(this._y1=m);else{var j=A-rt,ft=M-nt,St=ht*ht+at*at,E=j*j+ft*ft,Y=Math.sqrt(St),N=Math.sqrt(gt),G=T*Math.tan((O-Math.acos((St+gt-E)/(2*Y*N)))/2),W=G/N,dt=G/Y;Math.abs(W-1)>ut&&(this._+="L"+(v+W*ct)+","+(m+W*pt)),this._+="A"+T+","+T+",0,0,"+ +(pt*j>ct*ft)+","+(this._x1=v+dt*ht)+","+(this._y1=m+dt*at)}},arc:function(v,m,A,M,T,rt){v=+v,m=+m,A=+A,rt=!!rt;var nt=A*Math.cos(M),ht=A*Math.sin(M),at=v+nt,ct=m+ht,pt=1^rt,gt=rt?M-T:T-M;if(A<0)throw new Error("negative radius: "+A);this._x1===null?this._+="M"+at+","+ct:(Math.abs(this._x1-at)>ut||Math.abs(this._y1-ct)>ut)&&(this._+="L"+at+","+ct),A&&(gt<0&&(gt=gt%I+I),gt>H?this._+="A"+A+","+A+",0,1,"+pt+","+(v-nt)+","+(m-ht)+"A"+A+","+A+",0,1,"+pt+","+(this._x1=at)+","+(this._y1=ct):gt>ut&&(this._+="A"+A+","+A+",0,"+ +(gt>=O)+","+pt+","+(this._x1=v+A*Math.cos(T))+","+(this._y1=m+A*Math.sin(T))))},rect:function(v,m,A,M){this._+="M"+(this._x0=this._x1=+v)+","+(this._y0=this._y1=+m)+"h"+ +A+"v"+ +M+"h"+-A+"Z"},toString:function(){return this._}},c.path=S,Object.defineProperty(c,"__esModule",{value:!0})})})(Nn,Nn.exports)),Nn.exports}var Ke=En.exports,ke;function Ze(){return ke||(ke=1,(function(X,Q){(function(c,O){O(Q,Je())})(Ke,function(c,O){function I(t){return function(){return t}}var ut=Math.abs,H=Math.atan2,ot=Math.cos,S=Math.max,v=Math.min,m=Math.sin,A=Math.sqrt,M=1e-12,T=Math.PI,rt=T/2,nt=2*T;function ht(t){return t>1?0:t<-1?T:Math.acos(t)}function at(t){return t>=1?rt:t<=-1?-rt:Math.asin(t)}function ct(t){return t.innerRadius}function pt(t){return t.outerRadius}function gt(t){return t.startAngle}function j(t){return t.endAngle}function ft(t){return t&&t.padAngle}function St(t,n,r,u,f,_,d,h){var y=r-t,b=u-n,k=d-f,P=h-_,z=P*y-k*b;if(!(z*z<M))return z=(k*(n-_)-P*(t-f))/z,[t+z*y,n+z*b]}function E(t,n,r,u,f,_,d){var h=t-r,y=n-u,b=(d?_:-_)/A(h*h+y*y),k=b*y,P=-b*h,z=t+k,tt=n+P,U=r+k,lt=u+P,$=(z+U)/2,wt=(tt+lt)/2,kt=U-z,vt=lt-tt,Tt=kt*kt+vt*vt,It=f-_,Lt=z*lt-U*tt,Zt=(vt<0?-1:1)*A(S(0,It*It*Tt-Lt*Lt)),$t=(Lt*vt-kt*Zt)/Tt,qt=(-Lt*kt-vt*Zt)/Tt,Vt=(Lt*vt+kt*Zt)/Tt,Yt=(-Lt*kt+vt*Zt)/Tt,F=$t-$,it=qt-wt,hn=Vt-$,cn=Yt-wt;return F*F+it*it>hn*hn+cn*cn&&($t=Vt,qt=Yt),{cx:$t,cy:qt,x01:-k,y01:-P,x11:$t*(f/It-1),y11:qt*(f/It-1)}}function Y(){var t=ct,n=pt,r=I(0),u=null,f=gt,_=j,d=ft,h=null;function y(){var b,k,P=+t.apply(this,arguments),z=+n.apply(this,arguments),tt=f.apply(this,arguments)-rt,U=_.apply(this,arguments)-rt,lt=ut(U-tt),$=U>tt;if(h||(h=b=O.path()),z<P&&(k=z,z=P,P=k),!(z>M))h.moveTo(0,0);else if(lt>nt-M)h.moveTo(z*ot(tt),z*m(tt)),h.arc(0,0,z,tt,U,!$),P>M&&(h.moveTo(P*ot(U),P*m(U)),h.arc(0,0,P,U,tt,$));else{var wt=tt,kt=U,vt=tt,Tt=U,It=lt,Lt=lt,Zt=d.apply(this,arguments)/2,$t=Zt>M&&(u?+u.apply(this,arguments):A(P*P+z*z)),qt=v(ut(z-P)/2,+r.apply(this,arguments)),Vt=qt,Yt=qt,F,it;if($t>M){var hn=at($t/P*m(Zt)),cn=at($t/z*m(Zt));(It-=hn*2)>M?(hn*=$?1:-1,vt+=hn,Tt-=hn):(It=0,vt=Tt=(tt+U)/2),(Lt-=cn*2)>M?(cn*=$?1:-1,wt+=cn,kt-=cn):(Lt=0,wt=kt=(tt+U)/2)}var dn=z*ot(wt),yn=z*m(wt),Dn=P*ot(Tt),Bn=P*m(Tt);if(qt>M){var Vn=z*ot(kt),Yn=z*m(kt),se=P*ot(vt),oe=P*m(vt),Qt;if(lt<T&&(Qt=St(dn,yn,se,oe,Vn,Yn,Dn,Bn))){var ae=dn-Qt[0],ue=yn-Qt[1],le=Vn-Qt[0],he=Yn-Qt[1],ge=1/m(ht((ae*le+ue*he)/(A(ae*ae+ue*ue)*A(le*le+he*he)))/2),me=A(Qt[0]*Qt[0]+Qt[1]*Qt[1]);Vt=v(qt,(P-me)/(ge-1)),Yt=v(qt,(z-me)/(ge+1))}}Lt>M?Yt>M?(F=E(se,oe,dn,yn,z,Yt,$),it=E(Vn,Yn,Dn,Bn,z,Yt,$),h.moveTo(F.cx+F.x01,F.cy+F.y01),Yt<qt?h.arc(F.cx,F.cy,Yt,H(F.y01,F.x01),H(it.y01,it.x01),!$):(h.arc(F.cx,F.cy,Yt,H(F.y01,F.x01),H(F.y11,F.x11),!$),h.arc(0,0,z,H(F.cy+F.y11,F.cx+F.x11),H(it.cy+it.y11,it.cx+it.x11),!$),h.arc(it.cx,it.cy,Yt,H(it.y11,it.x11),H(it.y01,it.x01),!$))):(h.moveTo(dn,yn),h.arc(0,0,z,wt,kt,!$)):h.moveTo(dn,yn),!(P>M)||!(It>M)?h.lineTo(Dn,Bn):Vt>M?(F=E(Dn,Bn,Vn,Yn,P,-Vt,$),it=E(dn,yn,se,oe,P,-Vt,$),h.lineTo(F.cx+F.x01,F.cy+F.y01),Vt<qt?h.arc(F.cx,F.cy,Vt,H(F.y01,F.x01),H(it.y01,it.x01),!$):(h.arc(F.cx,F.cy,Vt,H(F.y01,F.x01),H(F.y11,F.x11),!$),h.arc(0,0,P,H(F.cy+F.y11,F.cx+F.x11),H(it.cy+it.y11,it.cx+it.x11),$),h.arc(it.cx,it.cy,Vt,H(it.y11,it.x11),H(it.y01,it.x01),!$))):h.arc(0,0,P,Tt,vt,$)}if(h.closePath(),b)return h=null,b+""||null}return y.centroid=function(){var b=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,k=(+f.apply(this,arguments)+ +_.apply(this,arguments))/2-T/2;return[ot(k)*b,m(k)*b]},y.innerRadius=function(b){return arguments.length?(t=typeof b=="function"?b:I(+b),y):t},y.outerRadius=function(b){return arguments.length?(n=typeof b=="function"?b:I(+b),y):n},y.cornerRadius=function(b){return arguments.length?(r=typeof b=="function"?b:I(+b),y):r},y.padRadius=function(b){return arguments.length?(u=b==null?null:typeof b=="function"?b:I(+b),y):u},y.startAngle=function(b){return arguments.length?(f=typeof b=="function"?b:I(+b),y):f},y.endAngle=function(b){return arguments.length?(_=typeof b=="function"?b:I(+b),y):_},y.padAngle=function(b){return arguments.length?(d=typeof b=="function"?b:I(+b),y):d},y.context=function(b){return arguments.length?(h=b??null,y):h},y}function N(t){this._context=t}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function G(t){return new N(t)}function W(t){return t[0]}function dt(t){return t[1]}function Z(){var t=W,n=dt,r=I(!0),u=null,f=G,_=null;function d(h){var y,b=h.length,k,P=!1,z;for(u==null&&(_=f(z=O.path())),y=0;y<=b;++y)!(y<b&&r(k=h[y],y,h))===P&&((P=!P)?_.lineStart():_.lineEnd()),P&&_.point(+t(k,y,h),+n(k,y,h));if(z)return _=null,z+""||null}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:I(+h),d):t},d.y=function(h){return arguments.length?(n=typeof h=="function"?h:I(+h),d):n},d.defined=function(h){return arguments.length?(r=typeof h=="function"?h:I(!!h),d):r},d.curve=function(h){return arguments.length?(f=h,u!=null&&(_=f(u)),d):f},d.context=function(h){return arguments.length?(h==null?u=_=null:_=f(u=h),d):u},d}function Ct(){var t=W,n=null,r=I(0),u=dt,f=I(!0),_=null,d=G,h=null;function y(k){var P,z,tt,U=k.length,lt,$=!1,wt,kt=new Array(U),vt=new Array(U);for(_==null&&(h=d(wt=O.path())),P=0;P<=U;++P){if(!(P<U&&f(lt=k[P],P,k))===$)if($=!$)z=P,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),tt=P-1;tt>=z;--tt)h.point(kt[tt],vt[tt]);h.lineEnd(),h.areaEnd()}$&&(kt[P]=+t(lt,P,k),vt[P]=+r(lt,P,k),h.point(n?+n(lt,P,k):kt[P],u?+u(lt,P,k):vt[P]))}if(wt)return h=null,wt+""||null}function b(){return Z().defined(f).curve(d).context(_)}return y.x=function(k){return arguments.length?(t=typeof k=="function"?k:I(+k),n=null,y):t},y.x0=function(k){return arguments.length?(t=typeof k=="function"?k:I(+k),y):t},y.x1=function(k){return arguments.length?(n=k==null?null:typeof k=="function"?k:I(+k),y):n},y.y=function(k){return arguments.length?(r=typeof k=="function"?k:I(+k),u=null,y):r},y.y0=function(k){return arguments.length?(r=typeof k=="function"?k:I(+k),y):r},y.y1=function(k){return arguments.length?(u=k==null?null:typeof k=="function"?k:I(+k),y):u},y.lineX0=y.lineY0=function(){return b().x(t).y(r)},y.lineY1=function(){return b().x(t).y(u)},y.lineX1=function(){return b().x(n).y(r)},y.defined=function(k){return arguments.length?(f=typeof k=="function"?k:I(!!k),y):f},y.curve=function(k){return arguments.length?(d=k,_!=null&&(h=d(_)),y):d},y.context=function(k){return arguments.length?(k==null?_=h=null:h=d(_=k),y):_},y}function xt(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function Mt(t){return t}function yt(){var t=Mt,n=xt,r=null,u=I(0),f=I(nt),_=I(0);function d(h){var y,b=h.length,k,P,z=0,tt=new Array(b),U=new Array(b),lt=+u.apply(this,arguments),$=Math.min(nt,Math.max(-nt,f.apply(this,arguments)-lt)),wt,kt=Math.min(Math.abs($)/b,_.apply(this,arguments)),vt=kt*($<0?-1:1),Tt;for(y=0;y<b;++y)(Tt=U[tt[y]=y]=+t(h[y],y,h))>0&&(z+=Tt);for(n!=null?tt.sort(function(It,Lt){return n(U[It],U[Lt])}):r!=null&&tt.sort(function(It,Lt){return r(h[It],h[Lt])}),y=0,P=z?($-b*vt)/z:0;y<b;++y,lt=wt)k=tt[y],Tt=U[k],wt=lt+(Tt>0?Tt*P:0)+vt,U[k]={data:h[k],index:y,value:Tt,startAngle:lt,endAngle:wt,padAngle:kt};return U}return d.value=function(h){return arguments.length?(t=typeof h=="function"?h:I(+h),d):t},d.sortValues=function(h){return arguments.length?(n=h,r=null,d):n},d.sort=function(h){return arguments.length?(r=h,n=null,d):r},d.startAngle=function(h){return arguments.length?(u=typeof h=="function"?h:I(+h),d):u},d.endAngle=function(h){return arguments.length?(f=typeof h=="function"?h:I(+h),d):f},d.padAngle=function(h){return arguments.length?(_=typeof h=="function"?h:I(+h),d):_},d}var Ot=At(G);function Pt(t){this._curve=t}Pt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function At(t){function n(r){return new Pt(t(r))}return n._curve=t,n}function D(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(r){return arguments.length?n(At(r)):n()._curve},t}function tn(){return D(Z().curve(Ot))}function zt(){var t=Ct().curve(Ot),n=t.curve,r=t.lineX0,u=t.lineX1,f=t.lineY0,_=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return D(r())},delete t.lineX0,t.lineEndAngle=function(){return D(u())},delete t.lineX1,t.lineInnerRadius=function(){return D(f())},delete t.lineY0,t.lineOuterRadius=function(){return D(_())},delete t.lineY1,t.curve=function(d){return arguments.length?n(At(d)):n()._curve},t}function Ft(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}var Ht=Array.prototype.slice;function gn(t){return t.source}function mn(t){return t.target}function nn(t){var n=gn,r=mn,u=W,f=dt,_=null;function d(){var h,y=Ht.call(arguments),b=n.apply(this,y),k=r.apply(this,y);if(_||(_=h=O.path()),t(_,+u.apply(this,(y[0]=b,y)),+f.apply(this,y),+u.apply(this,(y[0]=k,y)),+f.apply(this,y)),h)return _=null,h+""||null}return d.source=function(h){return arguments.length?(n=h,d):n},d.target=function(h){return arguments.length?(r=h,d):r},d.x=function(h){return arguments.length?(u=typeof h=="function"?h:I(+h),d):u},d.y=function(h){return arguments.length?(f=typeof h=="function"?h:I(+h),d):f},d.context=function(h){return arguments.length?(_=h??null,d):_},d}function jt(t,n,r,u,f){t.moveTo(n,r),t.bezierCurveTo(n=(n+u)/2,r,n,f,u,f)}function en(t,n,r,u,f){t.moveTo(n,r),t.bezierCurveTo(n,r=(r+f)/2,u,r,u,f)}function Jt(t,n,r,u,f){var _=Ft(n,r),d=Ft(n,r=(r+f)/2),h=Ft(u,r),y=Ft(u,f);t.moveTo(_[0],_[1]),t.bezierCurveTo(d[0],d[1],h[0],h[1],y[0],y[1])}function Kt(){return nn(jt)}function rn(){return nn(en)}function Gt(){var t=nn(Jt);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var sn={draw:function(t,n){var r=Math.sqrt(n/T);t.moveTo(r,0),t.arc(0,0,r,0,nt)}},on={draw:function(t,n){var r=Math.sqrt(n/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},an=Math.sqrt(1/3),p=an*2,R={draw:function(t,n){var r=Math.sqrt(n/p),u=r*an;t.moveTo(0,-r),t.lineTo(u,0),t.lineTo(0,r),t.lineTo(-u,0),t.closePath()}},L=.8908130915292852,C=Math.sin(T/10)/Math.sin(7*T/10),x=Math.sin(nt/10)*C,B=-Math.cos(nt/10)*C,et={draw:function(t,n){var r=Math.sqrt(n*L),u=x*r,f=B*r;t.moveTo(0,-r),t.lineTo(u,f);for(var _=1;_<5;++_){var d=nt*_/5,h=Math.cos(d),y=Math.sin(d);t.lineTo(y*r,-h*r),t.lineTo(h*u-y*f,y*u+h*f)}t.closePath()}},Xt={draw:function(t,n){var r=Math.sqrt(n),u=-r/2;t.rect(u,u,r,r)}},Rt=Math.sqrt(3),Dt={draw:function(t,n){var r=-Math.sqrt(n/(Rt*3));t.moveTo(0,r*2),t.lineTo(-Rt*r,-r),t.lineTo(Rt*r,-r),t.closePath()}},mt=-.5,bt=Math.sqrt(3)/2,Bt=1/Math.sqrt(12),Gn=(Bt/2+1)*3,vn={draw:function(t,n){var r=Math.sqrt(n/Gn),u=r/2,f=r*Bt,_=u,d=r*Bt+r,h=-_,y=d;t.moveTo(u,f),t.lineTo(_,d),t.lineTo(h,y),t.lineTo(mt*u-bt*f,bt*u+mt*f),t.lineTo(mt*_-bt*d,bt*_+mt*d),t.lineTo(mt*h-bt*y,bt*h+mt*y),t.lineTo(mt*u+bt*f,mt*f-bt*u),t.lineTo(mt*_+bt*d,mt*d-bt*_),t.lineTo(mt*h+bt*y,mt*y-bt*h),t.closePath()}},Qn=[sn,on,R,Xt,et,Dt,vn];function jn(){var t=I(sn),n=I(64),r=null;function u(){var f;if(r||(r=f=O.path()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),f)return r=null,f+""||null}return u.type=function(f){return arguments.length?(t=typeof f=="function"?f:I(f),u):t},u.size=function(f){return arguments.length?(n=typeof f=="function"?f:I(+f),u):n},u.context=function(f){return arguments.length?(r=f??null,u):r},u}function Wt(){}function fn(t,n,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+r)/6)}function un(t){this._context=t}un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Jn(t){return new un(t)}function Ln(t){this._context=t}Ln.prototype={areaStart:Wt,areaEnd:Wt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:fn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Kn(t){return new Ln(t)}function Cn(t){this._context=t}Cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,u=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,u):this._context.moveTo(r,u);break;case 3:this._point=4;default:fn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Pn(t){return new Cn(t)}function Rn(t,n){this._basis=new un(t),this._beta=n}Rn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,r=t.length-1;if(r>0)for(var u=t[0],f=n[0],_=t[r]-u,d=n[r]-f,h=-1,y;++h<=r;)y=h/r,this._basis.point(this._beta*t[h]+(1-this._beta)*(u+y*_),this._beta*n[h]+(1-this._beta)*(f+y*d));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var On=(function t(n){function r(u){return n===1?new un(u):new Rn(u,n)}return r.beta=function(u){return t(+u)},r})(.85);function _n(t,n,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function xn(t,n){this._context=t,this._k=(1-n)/6}xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_n(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:_n(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Zn=(function t(n){function r(u){return new xn(u,n)}return r.tension=function(u){return t(+u)},r})(0);function kn(t,n){this._context=t,this._k=(1-n)/6}kn.prototype={areaStart:Wt,areaEnd:Wt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:_n(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var $n=(function t(n){function r(u){return new kn(u,n)}return r.tension=function(u){return t(+u)},r})(0);function bn(t,n){this._context=t,this._k=(1-n)/6}bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_n(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var te=(function t(n){function r(u){return new bn(u,n)}return r.tension=function(u){return t(+u)},r})(0);function wn(t,n,r){var u=t._x1,f=t._y1,_=t._x2,d=t._y2;if(t._l01_a>M){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,y=3*t._l01_a*(t._l01_a+t._l12_a);u=(u*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/y,f=(f*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/y}if(t._l23_a>M){var b=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,k=3*t._l23_a*(t._l23_a+t._l12_a);_=(_*b+t._x1*t._l23_2a-n*t._l12_2a)/k,d=(d*b+t._y1*t._l23_2a-r*t._l12_2a)/k}t._context.bezierCurveTo(u,f,_,d,t._x2,t._y2)}function In(t,n){this._context=t,this._alpha=n}In.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+u*u,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:wn(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ne=(function t(n){function r(u){return n?new In(u,n):new xn(u,0)}return r.alpha=function(u){return t(+u)},r})(.5);function qn(t,n){this._context=t,this._alpha=n}qn.prototype={areaStart:Wt,areaEnd:Wt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+u*u,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:wn(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ee=(function t(n){function r(u){return n?new qn(u,n):new kn(u,0)}return r.alpha=function(u){return t(+u)},r})(.5);function Tn(t,n){this._context=t,this._alpha=n}Tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+u*u,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wn(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ie=(function t(n){function r(u){return n?new Tn(u,n):new bn(u,0)}return r.alpha=function(u){return t(+u)},r})(.5);function zn(t){this._context=t}zn.prototype={areaStart:Wt,areaEnd:Wt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function e(t){return new zn(t)}function i(t){return t<0?-1:1}function s(t,n,r){var u=t._x1-t._x0,f=n-t._x1,_=(t._y1-t._y0)/(u||f<0&&-0),d=(r-t._y1)/(f||u<0&&-0),h=(_*f+d*u)/(u+f);return(i(_)+i(d))*Math.min(Math.abs(_),Math.abs(d),.5*Math.abs(h))||0}function a(t,n){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-n)/2:n}function o(t,n,r){var u=t._x0,f=t._y0,_=t._x1,d=t._y1,h=(_-u)/3;t._context.bezierCurveTo(u+h,f+h*n,_-h,d-h*r,_,d)}function l(t){this._context=t}l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var r=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,r=s(this,t,n)),r);break;default:o(this,this._t0,r=s(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=r}}};function g(t){this._context=new w(t)}(g.prototype=Object.create(l.prototype)).point=function(t,n){l.prototype.point.call(this,n,t)};function w(t){this._context=t}w.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,r,u,f,_){this._context.bezierCurveTo(n,t,u,r,_,f)}};function q(t){return new l(t)}function J(t){return new g(t)}function K(t){this._context=t}K.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),r===2)this._context.lineTo(t[1],n[1]);else for(var u=st(t),f=st(n),_=0,d=1;d<r;++_,++d)this._context.bezierCurveTo(u[0][_],f[0][_],u[1][_],f[1][_],t[d],n[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function st(t){var n,r=t.length-1,u,f=new Array(r),_=new Array(r),d=new Array(r);for(f[0]=0,_[0]=2,d[0]=t[0]+2*t[1],n=1;n<r-1;++n)f[n]=1,_[n]=4,d[n]=4*t[n]+2*t[n+1];for(f[r-1]=2,_[r-1]=7,d[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)u=f[n]/_[n-1],_[n]-=u,d[n]-=u*d[n-1];for(f[r-1]=d[r-1]/_[r-1],n=r-2;n>=0;--n)f[n]=(d[n]-f[n+1])/_[n];for(_[r-1]=(t[r]+f[r-1])/2,n=0;n<r-1;++n)_[n]=2*t[n+1]-f[n+1];return[f,_]}function _t(t){return new K(t)}function Et(t,n){this._context=t,this._t=n}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=t,this._y=n}};function ln(t){return new Et(t,.5)}function Sn(t){return new Et(t,0)}function re(t){return new Et(t,1)}function Ut(t,n){if((d=t.length)>1)for(var r=1,u,f,_=t[n[0]],d,h=_.length;r<d;++r)for(f=_,_=t[n[r]],u=0;u<h;++u)_[u][1]+=_[u][0]=isNaN(f[u][1])?f[u][0]:f[u][1]}function Nt(t){for(var n=t.length,r=new Array(n);--n>=0;)r[n]=n;return r}function Te(t,n){return t[n]}function Se(){var t=I([]),n=Nt,r=Ut,u=Te;function f(_){var d=t.apply(this,arguments),h,y=_.length,b=d.length,k=new Array(b),P;for(h=0;h<b;++h){for(var z=d[h],tt=k[h]=new Array(y),U=0,lt;U<y;++U)tt[U]=lt=[0,+u(_[U],z,U,_)],lt.data=_[U];tt.key=z}for(h=0,P=n(k);h<b;++h)k[P[h]].index=h;return r(k,P),k}return f.keys=function(_){return arguments.length?(t=typeof _=="function"?_:I(Ht.call(_)),f):t},f.value=function(_){return arguments.length?(u=typeof _=="function"?_:I(+_),f):u},f.order=function(_){return arguments.length?(n=_==null?Nt:typeof _=="function"?_:I(Ht.call(_)),f):n},f.offset=function(_){return arguments.length?(r=_??Ut,f):r},f}function Me(t,n){if((u=t.length)>0){for(var r,u,f=0,_=t[0].length,d;f<_;++f){for(d=r=0;r<u;++r)d+=t[r][f][1]||0;if(d)for(r=0;r<u;++r)t[r][f][1]/=d}Ut(t,n)}}function Ae(t,n){if((y=t.length)>0)for(var r,u=0,f,_,d,h,y,b=t[n[0]].length;u<b;++u)for(d=h=0,r=0;r<y;++r)(_=(f=t[n[r]][u])[1]-f[0])>0?(f[0]=d,f[1]=d+=_):_<0?(f[1]=h,f[0]=h+=_):(f[0]=0,f[1]=_)}function Ee(t,n){if((f=t.length)>0){for(var r=0,u=t[n[0]],f,_=u.length;r<_;++r){for(var d=0,h=0;d<f;++d)h+=t[d][r][1]||0;u[r][1]+=u[r][0]=-h/2}Ut(t,n)}}function Ne(t,n){if(!(!((d=t.length)>0)||!((_=(f=t[n[0]]).length)>0))){for(var r=0,u=1,f,_,d;u<_;++u){for(var h=0,y=0,b=0;h<d;++h){for(var k=t[n[h]],P=k[u][1]||0,z=k[u-1][1]||0,tt=(P-z)/2,U=0;U<h;++U){var lt=t[n[U]],$=lt[u][1]||0,wt=lt[u-1][1]||0;tt+=$-wt}y+=P,b+=tt*P}f[u-1][1]+=f[u-1][0]=r,y&&(r-=b/y)}f[u-1][1]+=f[u-1][0]=r,Ut(t,n)}}function de(t){var n=t.map(Le);return Nt(t).sort(function(r,u){return n[r]-n[u]})}function Le(t){for(var n=-1,r=0,u=t.length,f,_=-1/0;++n<u;)(f=+t[n][1])>_&&(_=f,r=n);return r}function ye(t){var n=t.map(pe);return Nt(t).sort(function(r,u){return n[r]-n[u]})}function pe(t){for(var n=0,r=-1,u=t.length,f;++r<u;)(f=+t[r][1])&&(n+=f);return n}function Ce(t){return ye(t).reverse()}function Pe(t){var n=t.length,r,u,f=t.map(pe),_=de(t),d=0,h=0,y=[],b=[];for(r=0;r<n;++r)u=_[r],d<h?(d+=f[u],y.push(u)):(h+=f[u],b.push(u));return b.reverse().concat(y)}function Re(t){return Nt(t).reverse()}c.arc=Y,c.area=Ct,c.areaRadial=zt,c.curveBasis=Jn,c.curveBasisClosed=Kn,c.curveBasisOpen=Pn,c.curveBundle=On,c.curveCardinal=Zn,c.curveCardinalClosed=$n,c.curveCardinalOpen=te,c.curveCatmullRom=ne,c.curveCatmullRomClosed=ee,c.curveCatmullRomOpen=ie,c.curveLinear=G,c.curveLinearClosed=e,c.curveMonotoneX=q,c.curveMonotoneY=J,c.curveNatural=_t,c.curveStep=ln,c.curveStepAfter=re,c.curveStepBefore=Sn,c.line=Z,c.lineRadial=tn,c.linkHorizontal=Kt,c.linkRadial=Gt,c.linkVertical=rn,c.pie=yt,c.pointRadial=Ft,c.radialArea=zt,c.radialLine=tn,c.stack=Se,c.stackOffsetDiverging=Ae,c.stackOffsetExpand=Me,c.stackOffsetNone=Ut,c.stackOffsetSilhouette=Ee,c.stackOffsetWiggle=Ne,c.stackOrderAppearance=de,c.stackOrderAscending=ye,c.stackOrderDescending=Ce,c.stackOrderInsideOut=Pe,c.stackOrderNone=Nt,c.stackOrderReverse=Re,c.symbol=jn,c.symbolCircle=sn,c.symbolCross=on,c.symbolDiamond=R,c.symbolSquare=Xt,c.symbolStar=et,c.symbolTriangle=Dt,c.symbolWye=vn,c.symbols=Qn,Object.defineProperty(c,"__esModule",{value:!0})})})(En,En.exports)),En.exports}var $e=Mn.exports,be;function ti(){return be||(be=1,(function(X,Q){(function(c,O){O(Q,Qe(),Ze())})($e,function(c,O,I){function ut(E){return E.target.depth}function H(E){return E.depth}function ot(E,Y){return Y-1-E.height}function S(E,Y){return E.sourceLinks.length?E.depth:Y-1}function v(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?O.min(E.sourceLinks,ut)-1:0}function m(E){return function(){return E}}function A(E,Y){return T(E.source,Y.source)||E.index-Y.index}function M(E,Y){return T(E.target,Y.target)||E.index-Y.index}function T(E,Y){return E.y0-Y.y0}function rt(E){return E.value}function nt(E){return E.index}function ht(E){return E.nodes}function at(E){return E.links}function ct(E,Y){const N=E.get(Y);if(!N)throw new Error("missing: "+Y);return N}function pt({nodes:E}){for(const Y of E){let N=Y.y0,G=N;for(const W of Y.sourceLinks)W.y0=N+W.width/2,N+=W.width;for(const W of Y.targetLinks)W.y1=G+W.width/2,G+=W.width}}function gt(){let E=0,Y=0,N=1,G=1,W=24,dt=8,Z,Ct=nt,xt=S,Mt,yt,Ot=ht,Pt=at,At=6;function D(){const p={nodes:Ot.apply(null,arguments),links:Pt.apply(null,arguments)};return tn(p),zt(p),Ft(p),Ht(p),nn(p),pt(p),p}D.update=function(p){return pt(p),p},D.nodeId=function(p){return arguments.length?(Ct=typeof p=="function"?p:m(p),D):Ct},D.nodeAlign=function(p){return arguments.length?(xt=typeof p=="function"?p:m(p),D):xt},D.nodeSort=function(p){return arguments.length?(Mt=p,D):Mt},D.nodeWidth=function(p){return arguments.length?(W=+p,D):W},D.nodePadding=function(p){return arguments.length?(dt=Z=+p,D):dt},D.nodes=function(p){return arguments.length?(Ot=typeof p=="function"?p:m(p),D):Ot},D.links=function(p){return arguments.length?(Pt=typeof p=="function"?p:m(p),D):Pt},D.linkSort=function(p){return arguments.length?(yt=p,D):yt},D.size=function(p){return arguments.length?(E=Y=0,N=+p[0],G=+p[1],D):[N-E,G-Y]},D.extent=function(p){return arguments.length?(E=+p[0][0],N=+p[1][0],Y=+p[0][1],G=+p[1][1],D):[[E,Y],[N,G]]},D.iterations=function(p){return arguments.length?(At=+p,D):At};function tn({nodes:p,links:R}){for(const[C,x]of p.entries())x.index=C,x.sourceLinks=[],x.targetLinks=[];const L=new Map(p.map((C,x)=>[Ct(C,x,p),C]));for(const[C,x]of R.entries()){x.index=C;let{source:B,target:et}=x;typeof B!="object"&&(B=x.source=ct(L,B)),typeof et!="object"&&(et=x.target=ct(L,et)),B.sourceLinks.push(x),et.targetLinks.push(x)}if(yt!=null)for(const{sourceLinks:C,targetLinks:x}of p)C.sort(yt),x.sort(yt)}function zt({nodes:p}){for(const R of p)R.value=R.fixedValue===void 0?Math.max(O.sum(R.sourceLinks,rt),O.sum(R.targetLinks,rt)):R.fixedValue}function Ft({nodes:p}){const R=p.length;let L=new Set(p),C=new Set,x=0;for(;L.size;){for(const B of L){B.depth=x;for(const{target:et}of B.sourceLinks)C.add(et)}if(++x>R)throw new Error("circular link");L=C,C=new Set}}function Ht({nodes:p}){const R=p.length;let L=new Set(p),C=new Set,x=0;for(;L.size;){for(const B of L){B.height=x;for(const{source:et}of B.targetLinks)C.add(et)}if(++x>R)throw new Error("circular link");L=C,C=new Set}}function gn({nodes:p}){const R=O.max(p,x=>x.depth)+1,L=(N-E-W)/(R-1),C=new Array(R);for(const x of p){const B=Math.max(0,Math.min(R-1,Math.floor(xt.call(null,x,R))));x.layer=B,x.x0=E+B*L,x.x1=x.x0+W,C[B]?C[B].push(x):C[B]=[x]}if(Mt)for(const x of C)x.sort(Mt);return C}function mn(p){const R=O.min(p,L=>(G-Y-(L.length-1)*Z)/O.sum(L,rt));for(const L of p){let C=Y;for(const x of L){x.y0=C,x.y1=C+x.value*R,C=x.y1+Z;for(const B of x.sourceLinks)B.width=B.value*R}C=(G-C+Z)/(L.length+1);for(let x=0;x<L.length;++x){const B=L[x];B.y0+=C*(x+1),B.y1+=C*(x+1)}sn(L)}}function nn(p){const R=gn(p);Z=Math.min(dt,(G-Y)/(O.max(R,L=>L.length)-1)),mn(R);for(let L=0;L<At;++L){const C=Math.pow(.99,L),x=Math.max(1-C,(L+1)/At);en(R,C,x),jt(R,C,x)}}function jt(p,R,L){for(let C=1,x=p.length;C<x;++C){const B=p[C];for(const et of B){let Xt=0,Rt=0;for(const{source:mt,value:bt}of et.targetLinks){let Bt=bt*(et.layer-mt.layer);Xt+=on(mt,et)*Bt,Rt+=Bt}if(!(Rt>0))continue;let Dt=(Xt/Rt-et.y0)*R;et.y0+=Dt,et.y1+=Dt,Gt(et)}Mt===void 0&&B.sort(T),Jt(B,L)}}function en(p,R,L){for(let C=p.length,x=C-2;x>=0;--x){const B=p[x];for(const et of B){let Xt=0,Rt=0;for(const{target:mt,value:bt}of et.sourceLinks){let Bt=bt*(mt.layer-et.layer);Xt+=an(et,mt)*Bt,Rt+=Bt}if(!(Rt>0))continue;let Dt=(Xt/Rt-et.y0)*R;et.y0+=Dt,et.y1+=Dt,Gt(et)}Mt===void 0&&B.sort(T),Jt(B,L)}}function Jt(p,R){const L=p.length>>1,C=p[L];rn(p,C.y0-Z,L-1,R),Kt(p,C.y1+Z,L+1,R),rn(p,G,p.length-1,R),Kt(p,Y,0,R)}function Kt(p,R,L,C){for(;L<p.length;++L){const x=p[L],B=(R-x.y0)*C;B>1e-6&&(x.y0+=B,x.y1+=B),R=x.y1+Z}}function rn(p,R,L,C){for(;L>=0;--L){const x=p[L],B=(x.y1-R)*C;B>1e-6&&(x.y0-=B,x.y1-=B),R=x.y0-Z}}function Gt({sourceLinks:p,targetLinks:R}){if(yt===void 0){for(const{source:{sourceLinks:L}}of R)L.sort(M);for(const{target:{targetLinks:L}}of p)L.sort(A)}}function sn(p){if(yt===void 0)for(const{sourceLinks:R,targetLinks:L}of p)R.sort(M),L.sort(A)}function on(p,R){let L=p.y0-(p.sourceLinks.length-1)*Z/2;for(const{target:C,width:x}of p.sourceLinks){if(C===R)break;L+=x+Z}for(const{source:C,width:x}of R.targetLinks){if(C===p)break;L-=x}return L}function an(p,R){let L=R.y0-(R.targetLinks.length-1)*Z/2;for(const{source:C,width:x}of R.targetLinks){if(C===p)break;L+=x+Z}for(const{target:C,width:x}of p.sourceLinks){if(C===R)break;L-=x}return L}return D}function j(E){return[E.source.x1,E.y0]}function ft(E){return[E.target.x0,E.y1]}function St(){return I.linkHorizontal().source(j).target(ft)}c.sankey=gt,c.sankeyCenter=v,c.sankeyJustify=S,c.sankeyLeft=H,c.sankeyLinkHorizontal=St,c.sankeyRight=ot,Object.defineProperty(c,"__esModule",{value:!0})})})(Mn,Mn.exports)),Mn.exports}var pn=ti(),ce=(function(){var X=V(function(ot,S,v,m){for(v=v||{},m=ot.length;m--;v[ot[m]]=S);return v},"o"),Q=[1,9],c=[1,10],O=[1,5,10,12],I={trace:V(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:V(function(S,v,m,A,M,T,rt){var nt=T.length-1;switch(M){case 7:const ht=A.findOrCreateNode(T[nt-4].trim().replaceAll('""','"')),at=A.findOrCreateNode(T[nt-2].trim().replaceAll('""','"')),ct=parseFloat(T[nt].trim());A.addLink(ht,at,ct);break;case 8:case 9:case 11:this.$=T[nt];break;case 10:this.$=T[nt-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:Q,20:c},{1:[2,6],7:11,10:[1,12]},X(c,[2,4],{9:13,5:[1,14]}),{12:[1,15]},X(O,[2,8]),X(O,[2,9]),{19:[1,16]},X(O,[2,11]),{1:[2,1]},{1:[2,5]},X(c,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:Q,20:c},{15:18,16:7,17:8,18:Q,20:c},{18:[1,19]},X(c,[2,3]),{12:[1,20]},X(O,[2,10]),{15:21,16:7,17:8,18:Q,20:c},X([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:V(function(S,v){if(v.recoverable)this.trace(S);else{var m=new Error(S);throw m.hash=v,m}},"parseError"),parse:V(function(S){var v=this,m=[0],A=[],M=[null],T=[],rt=this.table,nt="",ht=0,at=0,ct=2,pt=1,gt=T.slice.call(arguments,1),j=Object.create(this.lexer),ft={yy:{}};for(var St in this.yy)Object.prototype.hasOwnProperty.call(this.yy,St)&&(ft.yy[St]=this.yy[St]);j.setInput(S,ft.yy),ft.yy.lexer=j,ft.yy.parser=this,typeof j.yylloc>"u"&&(j.yylloc={});var E=j.yylloc;T.push(E);var Y=j.options&&j.options.ranges;typeof ft.yy.parseError=="function"?this.parseError=ft.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function N(D){m.length=m.length-2*D,M.length=M.length-D,T.length=T.length-D}V(N,"popStack");function G(){var D;return D=A.pop()||j.lex()||pt,typeof D!="number"&&(D instanceof Array&&(A=D,D=A.pop()),D=v.symbols_[D]||D),D}V(G,"lex");for(var W,dt,Z,Ct,xt={},Mt,yt,Ot,Pt;;){if(dt=m[m.length-1],this.defaultActions[dt]?Z=this.defaultActions[dt]:((W===null||typeof W>"u")&&(W=G()),Z=rt[dt]&&rt[dt][W]),typeof Z>"u"||!Z.length||!Z[0]){var At="";Pt=[];for(Mt in rt[dt])this.terminals_[Mt]&&Mt>ct&&Pt.push("'"+this.terminals_[Mt]+"'");j.showPosition?At="Parse error on line "+(ht+1)+`:
`+j.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[W]||W)+"'":At="Parse error on line "+(ht+1)+": Unexpected "+(W==pt?"end of input":"'"+(this.terminals_[W]||W)+"'"),this.parseError(At,{text:j.match,token:this.terminals_[W]||W,line:j.yylineno,loc:E,expected:Pt})}if(Z[0]instanceof Array&&Z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+W);switch(Z[0]){case 1:m.push(W),M.push(j.yytext),T.push(j.yylloc),m.push(Z[1]),W=null,at=j.yyleng,nt=j.yytext,ht=j.yylineno,E=j.yylloc;break;case 2:if(yt=this.productions_[Z[1]][1],xt.$=M[M.length-yt],xt._$={first_line:T[T.length-(yt||1)].first_line,last_line:T[T.length-1].last_line,first_column:T[T.length-(yt||1)].first_column,last_column:T[T.length-1].last_column},Y&&(xt._$.range=[T[T.length-(yt||1)].range[0],T[T.length-1].range[1]]),Ct=this.performAction.apply(xt,[nt,at,ht,ft.yy,Z[1],M,T].concat(gt)),typeof Ct<"u")return Ct;yt&&(m=m.slice(0,-1*yt*2),M=M.slice(0,-1*yt),T=T.slice(0,-1*yt)),m.push(this.productions_[Z[1]][0]),M.push(xt.$),T.push(xt._$),Ot=rt[m[m.length-2]][m[m.length-1]],m.push(Ot);break;case 3:return!0}}return!0},"parse")},ut=(function(){var ot={EOF:1,parseError:V(function(v,m){if(this.yy.parser)this.yy.parser.parseError(v,m);else throw new Error(v)},"parseError"),setInput:V(function(S,v){return this.yy=v||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:V(function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var v=S.match(/(?:\r\n?|\n).*/g);return v?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},"input"),unput:V(function(S){var v=S.length,m=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-v),this.offset-=v;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===A.length?this.yylloc.first_column:0)+A[A.length-m.length].length-m[0].length:this.yylloc.first_column-v},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-v]),this.yyleng=this.yytext.length,this},"unput"),more:V(function(){return this._more=!0,this},"more"),reject:V(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:V(function(S){this.unput(this.match.slice(S))},"less"),pastInput:V(function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:V(function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:V(function(){var S=this.pastInput(),v=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+v+"^"},"showPosition"),test_match:V(function(S,v){var m,A,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),A=S[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],m=this.performAction.call(this,this.yy,this,v,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var T in M)this[T]=M[T];return!1}return!1},"test_match"),next:V(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,v,m,A;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),T=0;T<M.length;T++)if(m=this._input.match(this.rules[M[T]]),m&&(!v||m[0].length>v[0].length)){if(v=m,A=T,this.options.backtrack_lexer){if(S=this.test_match(m,M[T]),S!==!1)return S;if(this._backtrack){v=!1;continue}else return!1}else if(!this.options.flex)break}return v?(S=this.test_match(v,M[A]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:V(function(){var v=this.next();return v||this.lex()},"lex"),begin:V(function(v){this.conditionStack.push(v)},"begin"),popState:V(function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:V(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:V(function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},"topState"),pushState:V(function(v){this.begin(v)},"pushState"),stateStackSize:V(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:V(function(v,m,A,M){switch(A){case 0:return this.pushState("csv"),4;case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}};return ot})();I.lexer=ut;function H(){this.yy={}}return V(H,"Parser"),H.prototype=I,I.Parser=H,new H})();ce.parser=ce;var Xn=ce,Un=[],Hn=[],Wn=new Map,ni=V(()=>{Un=[],Hn=[],Wn=new Map,Fe()},"clear"),ei=class{constructor(X,Q,c=0){this.source=X,this.target=Q,this.value=c}static{V(this,"SankeyLink")}},ii=V((X,Q,c)=>{Un.push(new ei(X,Q,c))},"addLink"),ri=class{constructor(X){this.ID=X}static{V(this,"SankeyNode")}},si=V(X=>{X=Xe.sanitizeText(X,_e());let Q=Wn.get(X);return Q===void 0&&(Q=new ri(X),Wn.set(X,Q),Hn.push(Q)),Q},"findOrCreateNode"),oi=V(()=>Hn,"getNodes"),ai=V(()=>Un,"getLinks"),ui=V(()=>({nodes:Hn.map(X=>({id:X.ID})),links:Un.map(X=>({source:X.source.ID,target:X.target.ID,value:X.value}))}),"getGraph"),li={nodesMap:Wn,getConfig:V(()=>_e().sankey,"getConfig"),getNodes:oi,getLinks:ai,getGraph:ui,addLink:ii,findOrCreateNode:si,getAccTitle:Be,setAccTitle:De,getAccDescription:ze,setAccDescription:qe,getDiagramTitle:Ie,setDiagramTitle:Oe,clear:ni},we=class fe{static{V(this,"Uid")}static{this.count=0}static next(Q){return new fe(Q+ ++fe.count)}constructor(Q){this.id=Q,this.href=`#${Q}`}toString(){return"url("+this.href+")"}},hi={left:pn.sankeyLeft,right:pn.sankeyRight,center:pn.sankeyCenter,justify:pn.sankeyJustify},ci=V(function(X,Q,c,O){const{securityLevel:I,sankey:ut}=_e(),H=Ve.sankey;let ot;I==="sandbox"&&(ot=Fn("#i"+Q));const S=I==="sandbox"?Fn(ot.nodes()[0].contentDocument.body):Fn("body"),v=I==="sandbox"?S.select(`[id="${Q}"]`):Fn(`[id="${Q}"]`),m=ut?.width??H.width,A=ut?.height??H.width,M=ut?.useMaxWidth??H.useMaxWidth,T=ut?.nodeAlignment??H.nodeAlignment,rt=ut?.prefix??H.prefix,nt=ut?.suffix??H.suffix,ht=ut?.showValues??H.showValues,at=O.db.getGraph(),ct=hi[T];pn.sankey().nodeId(N=>N.id).nodeWidth(10).nodePadding(10+(ht?15:0)).nodeAlign(ct).extent([[0,0],[m,A]])(at);const j=We(He);v.append("g").attr("class","nodes").selectAll(".node").data(at.nodes).join("g").attr("class","node").attr("id",N=>(N.uid=we.next("node-")).id).attr("transform",function(N){return"translate("+N.x0+","+N.y0+")"}).attr("x",N=>N.x0).attr("y",N=>N.y0).append("rect").attr("height",N=>N.y1-N.y0).attr("width",N=>N.x1-N.x0).attr("fill",N=>j(N.id));const ft=V(({id:N,value:G})=>ht?`${N}
${rt}${Math.round(G*100)/100}${nt}`:N,"getText");v.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(at.nodes).join("text").attr("x",N=>N.x0<m/2?N.x1+6:N.x0-6).attr("y",N=>(N.y1+N.y0)/2).attr("dy",`${ht?"0":"0.35"}em`).attr("text-anchor",N=>N.x0<m/2?"start":"end").text(ft);const St=v.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(at.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),E=ut?.linkColor??"gradient";if(E==="gradient"){const N=St.append("linearGradient").attr("id",G=>(G.uid=we.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",G=>G.source.x1).attr("x2",G=>G.target.x0);N.append("stop").attr("offset","0%").attr("stop-color",G=>j(G.source.id)),N.append("stop").attr("offset","100%").attr("stop-color",G=>j(G.target.id))}let Y;switch(E){case"gradient":Y=V(N=>N.uid,"coloring");break;case"source":Y=V(N=>j(N.source.id),"coloring");break;case"target":Y=V(N=>j(N.target.id),"coloring");break;default:Y=E}St.append("path").attr("d",pn.sankeyLinkHorizontal()).attr("stroke",Y).attr("stroke-width",N=>Math.max(1,N.width)),Ye(void 0,v,0,M)},"draw"),fi={draw:ci},_i=V(X=>X.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),di=V(X=>`.label {
      font-family: ${X.fontFamily};
    }`,"getStyles"),yi=di,pi=Xn.parse.bind(Xn);Xn.parse=X=>pi(_i(X));var bi={styles:yi,parser:Xn,db:li,renderer:fi};export{bi as diagram};
