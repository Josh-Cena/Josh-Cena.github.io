import{u as l,j as s}from"./index-RGQIYrCD.js";import{P as t,a as m}from"./_components-QBhgxPvn.js";const n={tags:["Mathematics"],description:"Advent of Code 2024 - Day 2: Red-Nosed Reports, a problem that involves Mathematics. Solution written in OCaml, with detailed walkthrough and proof.",year:2024,day:2,title:"Advent of Code 2024 - Day 2: Red-Nosed Reports"};function i(a){const e={annotation:"annotation",code:"code",h1:"h1",h2:"h2",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msubsup:"msubsup",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...l(),...a.components};return s.jsxs(s.Fragment,{children:[s.jsxs(e.h1,{children:["Advent of Code 2024 - Day 2",s.jsx(e.span,{className:"subtitle",children:"Red-Nosed Reports"})]}),`
`,`
`,s.jsx(t,{frontMatter:n}),`
`,s.jsx(e.p,{children:"This problem pays tribute to 2015 day 19 (unimplemented)."}),`
`,s.jsx(e.h2,{children:"Part 1"}),`
`,s.jsxs(e.p,{children:["There are three types of neighbor difference ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"})]}),s.jsx(e.mo,{children:"="}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{children:"a"}),s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"+"}),s.jsx(e.mn,{children:"1"})]})]}),s.jsx(e.mo,{children:"−"}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{children:"a"}),s.jsx(e.mi,{children:"i"})]})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i = a_{i+1} - a_i"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7917em",verticalAlign:"-0.2083em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"a"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsxs(e.span,{className:"mord mtight",children:[s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),s.jsx(e.span,{className:"mbin mtight",children:"+"}),s.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2083em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"−"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"a"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]})]})]})]}),": increasing (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mn,{children:"3"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"1 \\le \\Delta \\le 3"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"3"})]})]})]}),"), decreasing (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"3"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"-3 \\le \\Delta \\le -1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"−"}),s.jsx(e.span,{className:"mord",children:"3"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord",children:"−"}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]}),"), and invalid. I can parse the successive differences to this structural representation, which makes subsequent analysis easier."]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-ocaml",children:`type diff_type = Inc of int | Dec of int | Invalid of int

let get_diff_type d =
  if 1 <= d && d <= 3 then Inc d
  else if -3 <= d && d <= -1 then Dec d
  else Invalid d

let is_inc d = match d with Inc _ -> true | _ -> false
let is_dec d = match d with Dec _ -> true | _ -> false

let rec differences lst =
  match lst with
  | a :: b :: rest -> get_diff_type (b - a) :: differences (b :: rest)
  | _ -> []
`})}),`
`,s.jsxs(e.p,{children:["For part 1, we just need lists that are all ",s.jsx(e.code,{children:"Inc"})," or all ",s.jsx(e.code,{children:"Dec"}),"."]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-ocaml",children:`let is_safe lst =
  let diffs = differences lst in
  List.for_all is_inc diffs || List.for_all is_dec diffs
in
let safe_lines = List.filter is_safe (List.map parse_line data) in
`})}),`
`,s.jsx(e.h2,{children:"Part 2"}),`
`,s.jsxs(e.p,{children:["Now we want to delete a single element from the list to make it safe. Obviously there's an ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{mathvariant:"script",children:"O"}),s.jsx(e.mo,{stretchy:"false",children:"("}),s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"n"}),s.jsx(e.mn,{children:"2"})]}),s.jsx(e.mo,{stretchy:"false",children:")"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(n^2)"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),s.jsx(e.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),s.jsx(e.span,{className:"mopen",children:"("}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"n"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.8141em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),s.jsx(e.span,{className:"mclose",children:")"})]})})]})," solution where we try deleting each element and checking if the result is safe. But we can do better."]}),`
`,s.jsxs(e.p,{children:["For starters, deleting an element can only fix one invalid difference, or two that share an endpoint. So if there are two invalid differences that don't share an endpoint, we can immediately return false. Otherwise, we can try deleting the shared endpoint ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsxs(e.msub,{children:[s.jsx(e.mi,{children:"a"}),s.jsx(e.mi,{children:"i"})]})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"a_i"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"a"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]})]})})]})," (or either endpoint if there's just one invalid difference), which removes ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"})]})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]})]})})]})," and ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]})]})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_{i-1}"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8917em",verticalAlign:"-0.2083em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsxs(e.span,{className:"mord mtight",children:[s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),s.jsx(e.span,{className:"mbin mtight",children:"−"}),s.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2083em"},children:s.jsx(e.span,{})})})]})})]})]})})]}),", replacing them with ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msubsup,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"})]}),s.jsx(e.mo,{children:"+"}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]})]})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i' = \\Delta_i + \\Delta_{i-1}"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"1.0106em",verticalAlign:"-0.2587em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsxs(e.span,{className:"vlist",style:{height:"0.7519em"},children:[s.jsxs(e.span,{style:{top:"-2.4413em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]}),s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})]}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2587em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8917em",verticalAlign:"-0.2083em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsxs(e.span,{className:"mord mtight",children:[s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),s.jsx(e.span,{className:"mbin mtight",children:"−"}),s.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2083em"},children:s.jsx(e.span,{})})})]})})]})]})]})]})," (if ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:">"}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"i > 0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6986em",verticalAlign:"-0.0391em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"i"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:">"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]})," and ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"<"}),s.jsx(e.mi,{children:"n"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"i < n-1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6986em",verticalAlign:"-0.0391em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"i"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"<"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"n"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"−"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]}),"). If ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"i=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6595em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"i"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]})," or ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"n"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"i=n-1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6595em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"i"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"n"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"−"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]}),", the resulting list is automatically safe; otherwise, we need to check if ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsxs(e.msubsup,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i'"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"1.0106em",verticalAlign:"-0.2587em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsxs(e.span,{className:"vlist",style:{height:"0.7519em"},children:[s.jsxs(e.span,{style:{top:"-2.4413em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]}),s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})]}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2587em"},children:s.jsx(e.span,{})})})]})})]})]})})]})," is compatible with the remaining differences."]}),`
`,s.jsxs(e.p,{children:["Other than those that are straight ",s.jsx(e.code,{children:"Invalid"}),", a difference may also be invalid because it's incompatible with the other differences. Therefore, our first step is to group all differences by type so we can identify the incompatible ones."]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-ocaml",children:`let diff_groups diffs =
  let rec aux diffs (inc, dec, invalid) =
    match diffs with
    | (i, Inc d) :: rest -> aux rest ((i, d) :: inc, dec, invalid)
    | (i, Dec d) :: rest -> aux rest (inc, (i, d) :: dec, invalid)
    | (i, Invalid d) :: rest -> aux rest (inc, dec, (i, d) :: invalid)
    | [] -> (inc, dec, invalid)
  in
  aux (List.mapi (fun i x -> (i, x)) diffs) ([], [], [])
`})}),`
`,s.jsx(e.p,{children:"Now, there are the following cases:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["All increasing, plus two invalid or one invalid and one decreasing: delete the shared endpoint, and validate that ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"})]}),s.jsx(e.mo,{children:"+"}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]})]})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i + \\Delta_{i-1}"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8917em",verticalAlign:"-0.2083em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsxs(e.span,{className:"mord mtight",children:[s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),s.jsx(e.span,{className:"mbin mtight",children:"−"}),s.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2083em"},children:s.jsx(e.span,{})})})]})})]})]})]})]})," is increasing."]}),`
`,s.jsxs(e.li,{children:["All decreasing, plus two invalid or one invalid and one increasing: delete the shared endpoint, and validate that ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsx(e.mi,{children:"i"})]}),s.jsx(e.mo,{children:"+"}),s.jsxs(e.msub,{children:[s.jsx(e.mi,{mathvariant:"normal",children:"Δ"}),s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"i"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]})]})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Delta_i + \\Delta_{i-1}"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:s.jsx(e.span,{})})})]})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8917em",verticalAlign:"-0.2083em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord",children:"Δ"}),s.jsx(e.span,{className:"msupsub",children:s.jsxs(e.span,{className:"vlist-t vlist-t2",children:[s.jsxs(e.span,{className:"vlist-r",children:[s.jsx(e.span,{className:"vlist",style:{height:"0.3117em"},children:s.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsxs(e.span,{className:"mord mtight",children:[s.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),s.jsx(e.span,{className:"mbin mtight",children:"−"}),s.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),s.jsx(e.span,{className:"vlist-s",children:"​"})]}),s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.2083em"},children:s.jsx(e.span,{})})})]})})]})]})]})]})," is decreasing."]}),`
`,s.jsx(e.li,{children:"All increasing, plus one invalid or one decreasing: if the invalid difference is at the start or end, we can delete the first or last element, respectively. Otherwise, we can delete either endpoint and check if the resulting difference is increasing."}),`
`,s.jsx(e.li,{children:"All decreasing, plus one invalid or one increasing: similar to the above."}),`
`,s.jsx(e.li,{children:"Already all increasing or all decreasing: return true."}),`
`,s.jsx(e.li,{children:"Otherwise, return false."}),`
`]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-ocaml",children:`let is_safe lst =
  let diffs = differences lst in
  let inc, dec, invalid = diff_groups diffs in
  match (inc, dec, invalid) with
  | (_, [], [ (j, dj); (i, di) ] | _, [ (j, dj) ], [ (i, di) ])
    when j = i + 1 || j = i - 1 ->
      is_inc (get_diff_type (di + dj))
  | ([], _, [ (j, dj); (i, di) ] | [ (j, dj) ], _, [ (i, di) ])
    when j = i + 1 || j = i - 1 ->
      is_dec (get_diff_type (di + dj))
  | _, [ (i, di) ], [] | _, [], [ (i, di) ] ->
      i = 0
      || i = List.length lst - 2
      || is_inc (get_diff_type (List.assoc (i - 1) inc + di))
      || is_inc (get_diff_type (List.assoc (i + 1) inc + di))
  | [ (i, di) ], _, [] | [], _, [ (i, di) ] ->
      i = 0
      || i = List.length lst - 2
      || is_dec (get_diff_type (List.assoc (i - 1) dec + di))
      || is_dec (get_diff_type (List.assoc (i + 1) dec + di))
  | _, [], [] | [], _, [] -> true
  | _ -> false
`})}),`
`,s.jsx(m,{frontMatter:n})]})}function h(a={}){const{wrapper:e}={...l(),...a.components};return e?s.jsx(e,{...a,children:s.jsx(i,{...a})}):i(a)}export{h as default,n as frontMatter};
