import{u as m,j as s}from"./index-BVdbyz0p.js";import{F as t,a as i}from"./_components-ozm2G8yB.js";const n={tags:["Dynamic programming"],description:"Advent of Code 2023 - Day 12: Hot Springs, a problem that involves Dynamic programming. Solution written in R, with detailed walkthrough and proof.",year:2023,day:12,title:"Advent of Code 2023 - Day 12: Hot Springs"};function l(a){const e={a:"a",annotation:"annotation",code:"code",h1:"h1",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...m(),...a.components};return s.jsxs(s.Fragment,{children:[s.jsxs(e.h1,{children:["Advent of Code 2023 - Day 12",s.jsx(e.span,{className:"subtitle",children:"Hot Springs"})]}),`
`,`
`,s.jsx(t,{frontMatter:n}),`
`,s.jsxs(e.p,{children:["Because we are making a series of decisions (do I fill the ",s.jsx(e.code,{children:"?"})," with ",s.jsx(e.code,{children:"#"})," or ",s.jsx(e.code,{children:"."}),"?) and each one determines what decisions we can make next (in order to satisfy the arrangement given), this strongly suggests dynamic programming."]}),`
`,s.jsxs(e.p,{children:["We iterate through each spring in the condition records and build groups one by one. The state consists of the current group's index ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsx(e.mi,{children:"j"})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"})]})})]})," (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{children:"m"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"1\\le j\\le m"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"})]})]})]}),", ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsx(e.mi,{children:"m"})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"m"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"})]})})]})," is the number of groups) and size ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsx(e.mi,{children:"s"})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"s"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"})]})})]})," (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mn,{children:"0"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"≤"}),s.jsx(e.mi,{children:"max"}),s.jsx(e.mo,{children:"⁡"}),s.jsx(e.mo,{stretchy:"false",children:"("}),s.jsx(e.mtext,{children:"arrangements"}),s.jsx(e.mo,{stretchy:"false",children:")"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"0\\le s\\le \\max(\\text{arrangements})"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord",children:"0"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"≤"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),s.jsx(e.span,{className:"mop",children:"max"}),s.jsx(e.span,{className:"mopen",children:"("}),s.jsx(e.span,{className:"mord text",children:s.jsx(e.span,{className:"mord",children:"arrangements"})}),s.jsx(e.span,{className:"mclose",children:")"})]})]})]}),"). ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"s=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]}),' indicates an "idle" state, i.e., not actively adding springs to the current group. We count how many ways there are to reach each state (see ',s.jsx(e.a,{href:"/notes/aoc/2021/6/",children:"2021 day 6"}),")."]}),`
`,s.jsxs(e.p,{children:["Initially we start at state ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j=1, s=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]})," (want to construct the first group, but no springs added yet). Because in R indices start at 1, all indices into ",s.jsx(e.code,{children:"dp"})," are shifted by 1, so ",s.jsx(e.code,{children:"1, 1"})," corresponds to ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j=1, s=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]}),"."]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-R",children:`dp <- matrix(0, nrow = m + 1, ncol = max_seg_len + 1)
dp[1, 1] <- 1
`})}),`
`,s.jsx(e.p,{children:"Given a current state, we can do one of the following transitions:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["If the current spring may be operational (",s.jsx(e.code,{children:"."})," or ",s.jsx(e.code,{children:"?"}),"), and the current group size is positive (i.e., the group is active), then we close the current group. However, if the current group size is not equal to the expected size, then it's not a valid place to close, and this state contributes nothing. Otherwise, this state contributes its number to the next state ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"+"}),s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j'=j+1,s'=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]}),"."]}),`
`,s.jsxs(e.li,{children:["If the current spring may be operational (",s.jsx(e.code,{children:"."})," or ",s.jsx(e.code,{children:"?"}),"), and the current group size is zero (i.e., the group is idle), then we are idle and should stay idle. This state contributes its number to the next state ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j'=j,s'=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]}),"."]}),`
`,s.jsxs(e.li,{children:["If the current spring may be damaged (",s.jsx(e.code,{children:"#"})," or ",s.jsx(e.code,{children:"?"}),"), then we add it to the current group. However, if the current group size is already at the expected size, or if we have already built enough groups, then this is invalid and contributes nothing. Otherwise, this state contributes its number to the next state ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsxs(e.msup,{children:[s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"′"})]}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"+"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j'=j,s'=s+1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsxs(e.span,{className:"mord",children:[s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"msupsub",children:s.jsx(e.span,{className:"vlist-t",children:s.jsx(e.span,{className:"vlist-r",children:s.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:s.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[s.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),s.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:s.jsx(e.span,{className:"mord mtight",children:s.jsx(e.span,{className:"mord mtight",children:"′"})})})]})})})})})]}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]}),"."]}),`
`]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-R",children:`for (ch in cur_springs) {
  next_dp <- matrix(0, nrow = m + 1, ncol = max_seg_len + 1)

  for (j in 1:(m + 1)) {
    for (s in 0:max_seg_len) {
      ways <- dp[j, s + 1]
      if (ways == 0) {
        # Unreachable state
        next
      }
      if (ch == "." || ch == "?") {
        if (j <= m && s == expected_counts[j]) {
          next_dp[j + 1, 0 + 1] <- next_dp[j + 1, 0 + 1] + ways
        } else if (s == 0) {
          next_dp[j, 0 + 1] <- next_dp[j, 0 + 1] + ways
        }
      }
      if (ch == "#" || ch == "?") {
        if (j <= m && s < expected_counts[j]) {
          next_dp[j, s + 1 + 1] <- next_dp[j, s + 1 + 1] + ways
        }
      }
    }
  }
  dp <- next_dp
}
`})}),`
`,s.jsxs(e.p,{children:["The valid ending states are those where we have built all ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsx(e.mi,{children:"m"})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"m"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"})]})})]})," groups and the ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"m"}),s.jsx(e.mo,{children:"+"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"m+1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]}),"-th group is idle (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"m"}),s.jsx(e.mo,{children:"+"}),s.jsx(e.mn,{children:"1"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mn,{children:"0"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j=m+1, s=0"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"+"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord",children:"1"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"0"})]})]})]}),"), or we have built ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"m"}),s.jsx(e.mo,{children:"−"}),s.jsx(e.mn,{children:"1"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"m-1"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),s.jsx(e.span,{className:"mbin",children:"−"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),s.jsx(e.span,{className:"mord",children:"1"})]})]})]})," groups and the ",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsx(e.mrow,{children:s.jsx(e.mi,{children:"m"})}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"m"})]})})}),s.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"})]})})]}),"-th group is active with the expected size (",s.jsxs(e.span,{className:"katex",children:[s.jsx(e.span,{className:"katex-mathml",children:s.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:s.jsxs(e.semantics,{children:[s.jsxs(e.mrow,{children:[s.jsx(e.mi,{children:"j"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mi,{children:"m"}),s.jsx(e.mo,{separator:"true",children:","}),s.jsx(e.mi,{children:"s"}),s.jsx(e.mo,{children:"="}),s.jsx(e.mtext,{children:"expected_counts"}),s.jsx(e.mo,{stretchy:"false",children:"["}),s.jsx(e.mi,{children:"m"}),s.jsx(e.mo,{stretchy:"false",children:"]"})]}),s.jsx(e.annotation,{encoding:"application/x-tex",children:"j=m, s=\\text{expected\\_counts}[m]"})]})})}),s.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"m"}),s.jsx(e.span,{className:"mpunct",children:","}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.jsx(e.span,{className:"mord mathnormal",children:"s"}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),s.jsx(e.span,{className:"mrel",children:"="}),s.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),s.jsxs(e.span,{className:"base",children:[s.jsx(e.span,{className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),s.jsx(e.span,{className:"mord text",children:s.jsx(e.span,{className:"mord",children:"expected_counts"})}),s.jsx(e.span,{className:"mopen",children:"["}),s.jsx(e.span,{className:"mord mathnormal",children:"m"}),s.jsx(e.span,{className:"mclose",children:"]"})]})]})]}),"). We sum these two states to get the final answer."]}),`
`,s.jsx(e.pre,{children:s.jsx(e.code,{className:"language-R",children:`dp[m + 1, 0 + 1] + dp[m, expected_counts[m] + 1]
`})}),`
`,s.jsxs(e.p,{children:["Parts 1 and 2 are exactly the same, except that in part 2 there's some preprocessing with the input, and the count is so big that we need ",s.jsx(e.code,{children:"gmp"})," again for the total. (But each ",s.jsx(e.code,{children:"count_dp"})," still fits in a 32-bit integer.)"]}),`
`,s.jsx(i,{frontMatter:n})]})}function h(a={}){const{wrapper:e}={...m(),...a.components};return e?s.jsx(e,{...a,children:s.jsx(l,{...a})}):l(a)}export{h as default,n as frontMatter};
